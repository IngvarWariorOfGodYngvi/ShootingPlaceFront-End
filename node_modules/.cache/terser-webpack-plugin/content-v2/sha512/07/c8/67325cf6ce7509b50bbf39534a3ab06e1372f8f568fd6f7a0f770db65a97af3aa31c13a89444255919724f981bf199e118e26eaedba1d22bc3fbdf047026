{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[35],{\"1bc0\":function(t,e,s){\"use strict\";s.r(e);var a=function(){var t=this,e=t._self._c;return e(\"div\",{staticClass:\"col\"},[e(\"q-card-section\",[e(\"q-input\",{staticClass:\"full-width\",attrs:{color:\"positive\",\"input-class\":\"text-positive\",\"label-color\":\"positive\",dense:\"\",filled:\"\",mask:\"####-##-##\",label:\"Data początkowa\"},scopedSlots:t._u([{key:\"append\",fn:function(){return[e(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"event\",color:\"positive\"}},[e(\"q-popup-proxy\",{ref:\"qDateProxy\",attrs:{\"transition-show\":\"scale\",\"transition-hide\":\"scale\"}},[e(\"q-date\",{staticClass:\"bg-dark text-positive\",attrs:{mask:\"YYYY-MM-DD\"},on:{input:function(e){return t.getRecordsFromBook(t.firstDate,t.secondDate)}},model:{value:t.firstDate,callback:function(e){t.firstDate=e},expression:\"firstDate\"}},[e(\"div\",{staticClass:\"row items-center justify-end\"},[e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Zamknij\",color:\"primary\"}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.firstDate,callback:function(e){t.firstDate=e},expression:\"firstDate\"}}),e(\"q-input\",{staticClass:\"full-width\",attrs:{color:\"positive\",\"input-class\":\"text-positive\",\"label-color\":\"positive\",dense:\"\",filled:\"\",mask:\"####-##-##\",label:\"Data końcowa\"},scopedSlots:t._u([{key:\"append\",fn:function(){return[e(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"event\",color:\"positive\"}},[e(\"q-popup-proxy\",{ref:\"qDateProxy\",attrs:{\"transition-show\":\"scale\",\"transition-hide\":\"scale\"}},[e(\"q-date\",{staticClass:\"bg-dark text-positive\",attrs:{mask:\"YYYY-MM-DD\"},on:{input:function(e){return t.getRecordsFromBook(t.firstDate,t.secondDate)}},model:{value:t.secondDate,callback:function(e){t.secondDate=e},expression:\"secondDate\"}},[e(\"div\",{staticClass:\"row items-center justify-end\"},[e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Zamknij\",color:\"primary\"}})],1)])],1)],1)]},proxy:!0}]),model:{value:t.secondDate,callback:function(e){t.secondDate=e},expression:\"secondDate\"}}),e(\"div\",{staticClass:\"q-pa-md\"},[e(\"q-btn\",{staticClass:\"q-mr-md\",attrs:{color:\"primary\",label:\"Wyszukaj\"},on:{click:function(e){return t.getRecordsFromBook(t.firstDate,t.secondDate)}}}),e(\"q-btn\",{attrs:{color:\"primary\",label:\"pobierz listę\"},on:{click:function(e){return t.getJudgingReport(t.firstDate,t.secondDate)}}})],1)],1),e(\"q-card-section\",[e(\"div\",{staticClass:\"row text-bold\"},[e(\"div\",{staticClass:\"q-pr-xs\"},[t._v(\"lp\")]),e(\"div\",{staticClass:\"col-2\"},[t._v(\"Nazwisko i Imię\")]),e(\"div\",{staticClass:\"col-2\"},[t._v(\"Data i godzina przyjścia\")]),e(\"div\",{staticClass:\"col-3\"},[t._v(\"Adres / Numer pozwolenia\")]),e(\"div\",{staticClass:\"col-1 text-left\"},[t._v(\"zgoda na przetwarzanie danych\")]),e(\"div\",{staticClass:\"col-1 text-left\"},[t._v(\"zapoznanie się z regulaminem strzelnicy\")]),e(\"div\",{staticClass:\"col text-center\"},[t._v(\"podpis\")])]),e(\"q-virtual-scroll\",{staticClass:\"q-pa-none full-width\",staticStyle:{height:\"40vh\"},attrs:{items:t.evidenceBookList,visible:\"\"},scopedSlots:t._u([{key:\"default\",fn:function({index:s,item:a}){return[e(\"div\",{staticClass:\"row text-positive\"},[e(\"div\",{staticClass:\"q-pr-xs\"},[t._v(t._s(s+1))]),e(\"div\",{staticClass:\"col-2\"},[t._v(t._s(a.secondName)+\" \"+t._s(a.firstName))]),e(\"div\",{staticClass:\"col-2\"},[e(\"div\",[t._v(t._s(t.convertDateTime(a.dateTime).substring(0,10))),e(\"div\",[t._v(t._s(t.convertDateTime(a.dateTime).substring(10,19)))])])]),e(\"div\",{staticClass:\"col-3\"},[t._v(t._s(null!=a.weaponPermission?a.weaponPermission:a.address))]),e(\"div\",{staticClass:\"col-1 text-center\"},[t._v(t._s(a.dataProcessingAgreement?\"tak\":\"nie\"))]),e(\"div\",{staticClass:\"col-1 text-center\"},[t._v(t._s(a.statementOnReadingTheShootingPlaceRegulations?\"tak\":\"nie\"))]),e(\"div\",{staticClass:\"col bg-white\"},[e(\"q-img\",{staticClass:\"flex-center\",attrs:{contain:\"\",height:\"8vh\",\"spinner-color\":\"white\",src:`http://${t.local}/files/getFile?uuid=${a.imageUUID}`}})],1)])]}}])})],1)],1)},i=[],o=(s(\"2b3d\"),s(\"9861\"),s(\"5319\"),s(\"3dfd\")),n=s(\"bc3a\"),c=s.n(n),l={name:\"EvidenceBook.vue\",data(){return{firstDate:null,secondDate:this.createTodayDate(),evidenceBookList:[],success:!1,message:null,local:o[\"default\"].host}},methods:{getRecordsFromBook(t,e){fetch(`http://${this.local}/evidence/?firstDate=${t}&secondDate=${e}`,{method:\"GET\"}).then((t=>t.json())).then((t=>{this.evidenceBookList=t}))},getJudgingReport(t,e){null!=t&&null!=e&&c()({url:`http://${this.local}/files/downloadEvidenceBook?firstDate=${t}&secondDate=${e}`,method:\"GET\",responseType:\"blob\"}).then((s=>{const a=window.URL.createObjectURL(new Blob([s.data])),i=document.createElement(\"a\");i.href=a,i.setAttribute(\"download\",\"Książka pobytu na strzelnicy od \"+t+\" do \"+e+\".pdf\"),document.body.appendChild(i),i.click(),this.listDownload=!0,this.autoClose()}))},convertDateTime(t){return t.replace(\"T\",\" \").substring(0,19)},showloading(){this.$q.loading.show({message:\"Dzieje się coś ważnego... Poczekaj\"}),this.timer=setTimeout((()=>{this.$q.loading.hide(),this.timer=0}),2e3)},darkSet(){return JSON.parse(window.localStorage.getItem(\"BackgroundDark\"))},createTodayDate(){const t=new Date;let e=0,s=0;return e=t.getMonth()+1<10?\"0\"+(t.getMonth()+1):t.getMonth()+1,s=t.getDate()<10?\"0\"+t.getDate():t.getDate(),t.getFullYear()+\"-\"+e+\"-\"+s},autoClose(){setTimeout((()=>{this.success=!1,this.message=null}),2e3)}}},r=l,d=s(\"2877\"),p=s(\"a370\"),u=s(\"27f9\"),v=s(\"0016\"),m=s(\"7cbe\"),f=s(\"52ee\"),h=s(\"9c40\"),D=s(\"a12b\"),g=s(\"068f\"),b=s(\"7f67\"),k=s(\"eebe\"),w=s.n(k),C=Object(d[\"a\"])(r,a,i,!1,null,null,null);e[\"default\"]=C.exports;w()(C,\"components\",{QCardSection:p[\"a\"],QInput:u[\"a\"],QIcon:v[\"a\"],QPopupProxy:m[\"a\"],QDate:f[\"a\"],QBtn:h[\"a\"],QVirtualScroll:D[\"a\"],QImg:g[\"a\"]}),w()(C,\"directives\",{ClosePopup:b[\"a\"]})}}]);","name":"js/35.2d98151e.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[35],{\n\n/***/ \"1bc0\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--7!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/otherFunctions/EvidenceBook.vue?vue&type=template&id=89d04d68&\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c('div', {\n    staticClass: \"col\"\n  }, [_c('q-card-section', [_c('q-input', {\n    staticClass: \"full-width\",\n    attrs: {\n      \"color\": \"positive\",\n      \"input-class\": \"text-positive\",\n      \"label-color\": \"positive\",\n      \"dense\": \"\",\n      \"filled\": \"\",\n      \"mask\": \"####-##-##\",\n      \"label\": \"Data początkowa\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"append\",\n      fn: function () {\n        return [_c('q-icon', {\n          staticClass: \"cursor-pointer\",\n          attrs: {\n            \"name\": \"event\",\n            \"color\": \"positive\"\n          }\n        }, [_c('q-popup-proxy', {\n          ref: \"qDateProxy\",\n          attrs: {\n            \"transition-show\": \"scale\",\n            \"transition-hide\": \"scale\"\n          }\n        }, [_c('q-date', {\n          staticClass: \"bg-dark text-positive\",\n          attrs: {\n            \"mask\": \"YYYY-MM-DD\"\n          },\n          on: {\n            \"input\": function ($event) {\n              return _vm.getRecordsFromBook(_vm.firstDate, _vm.secondDate);\n            }\n          },\n          model: {\n            value: _vm.firstDate,\n            callback: function ($$v) {\n              _vm.firstDate = $$v;\n            },\n            expression: \"firstDate\"\n          }\n        }, [_c('div', {\n          staticClass: \"row items-center justify-end\"\n        }, [_c('q-btn', {\n          directives: [{\n            name: \"close-popup\",\n            rawName: \"v-close-popup\"\n          }],\n          attrs: {\n            \"label\": \"Zamknij\",\n            \"color\": \"primary\"\n          }\n        })], 1)])], 1)], 1)];\n      },\n      proxy: true\n    }]),\n    model: {\n      value: _vm.firstDate,\n      callback: function ($$v) {\n        _vm.firstDate = $$v;\n      },\n      expression: \"firstDate\"\n    }\n  }), _c('q-input', {\n    staticClass: \"full-width\",\n    attrs: {\n      \"color\": \"positive\",\n      \"input-class\": \"text-positive\",\n      \"label-color\": \"positive\",\n      \"dense\": \"\",\n      \"filled\": \"\",\n      \"mask\": \"####-##-##\",\n      \"label\": \"Data końcowa\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"append\",\n      fn: function () {\n        return [_c('q-icon', {\n          staticClass: \"cursor-pointer\",\n          attrs: {\n            \"name\": \"event\",\n            \"color\": \"positive\"\n          }\n        }, [_c('q-popup-proxy', {\n          ref: \"qDateProxy\",\n          attrs: {\n            \"transition-show\": \"scale\",\n            \"transition-hide\": \"scale\"\n          }\n        }, [_c('q-date', {\n          staticClass: \"bg-dark text-positive\",\n          attrs: {\n            \"mask\": \"YYYY-MM-DD\"\n          },\n          on: {\n            \"input\": function ($event) {\n              return _vm.getRecordsFromBook(_vm.firstDate, _vm.secondDate);\n            }\n          },\n          model: {\n            value: _vm.secondDate,\n            callback: function ($$v) {\n              _vm.secondDate = $$v;\n            },\n            expression: \"secondDate\"\n          }\n        }, [_c('div', {\n          staticClass: \"row items-center justify-end\"\n        }, [_c('q-btn', {\n          directives: [{\n            name: \"close-popup\",\n            rawName: \"v-close-popup\"\n          }],\n          attrs: {\n            \"label\": \"Zamknij\",\n            \"color\": \"primary\"\n          }\n        })], 1)])], 1)], 1)];\n      },\n      proxy: true\n    }]),\n    model: {\n      value: _vm.secondDate,\n      callback: function ($$v) {\n        _vm.secondDate = $$v;\n      },\n      expression: \"secondDate\"\n    }\n  }), _c('div', {\n    staticClass: \"q-pa-md\"\n  }, [_c('q-btn', {\n    staticClass: \"q-mr-md\",\n    attrs: {\n      \"color\": \"primary\",\n      \"label\": \"Wyszukaj\"\n    },\n    on: {\n      \"click\": function ($event) {\n        return _vm.getRecordsFromBook(_vm.firstDate, _vm.secondDate);\n      }\n    }\n  }), _c('q-btn', {\n    attrs: {\n      \"color\": \"primary\",\n      \"label\": \"pobierz listę\"\n    },\n    on: {\n      \"click\": function ($event) {\n        return _vm.getJudgingReport(_vm.firstDate, _vm.secondDate);\n      }\n    }\n  })], 1)], 1), _c('q-card-section', [_c('div', {\n    staticClass: \"row text-bold\"\n  }, [_c('div', {\n    staticClass: \"q-pr-xs\"\n  }, [_vm._v(\"lp\")]), _c('div', {\n    staticClass: \"col-2\"\n  }, [_vm._v(\"Nazwisko i Imię\")]), _c('div', {\n    staticClass: \"col-2\"\n  }, [_vm._v(\"Data i godzina przyjścia\")]), _c('div', {\n    staticClass: \"col-3\"\n  }, [_vm._v(\"Adres / Numer pozwolenia\")]), _c('div', {\n    staticClass: \"col-1 text-left\"\n  }, [_vm._v(\"zgoda na przetwarzanie danych\")]), _c('div', {\n    staticClass: \"col-1 text-left\"\n  }, [_vm._v(\"zapoznanie się z regulaminem strzelnicy\")]), _c('div', {\n    staticClass: \"col text-center\"\n  }, [_vm._v(\"podpis\")])]), _c('q-virtual-scroll', {\n    staticClass: \"q-pa-none full-width\",\n    staticStyle: {\n      \"height\": \"40vh\"\n    },\n    attrs: {\n      \"items\": _vm.evidenceBookList,\n      \"visible\": \"\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function ({\n        index,\n        item\n      }) {\n        return [_c('div', {\n          staticClass: \"row text-positive\"\n        }, [_c('div', {\n          staticClass: \"q-pr-xs\"\n        }, [_vm._v(_vm._s(index + 1))]), _c('div', {\n          staticClass: \"col-2\"\n        }, [_vm._v(_vm._s(item.secondName) + \" \" + _vm._s(item.firstName))]), _c('div', {\n          staticClass: \"col-2\"\n        }, [_c('div', [_vm._v(_vm._s(_vm.convertDateTime(item.dateTime).substring(0, 10))), _c('div', [_vm._v(_vm._s(_vm.convertDateTime(item.dateTime).substring(10, 19)))])])]), _c('div', {\n          staticClass: \"col-3\"\n        }, [_vm._v(_vm._s(item.weaponPermission != null ? item.weaponPermission : item.address))]), _c('div', {\n          staticClass: \"col-1 text-center\"\n        }, [_vm._v(_vm._s(item.dataProcessingAgreement ? 'tak' : 'nie'))]), _c('div', {\n          staticClass: \"col-1 text-center\"\n        }, [_vm._v(_vm._s(item.statementOnReadingTheShootingPlaceRegulations ? 'tak' : 'nie'))]), _c('div', {\n          staticClass: \"col bg-white\"\n        }, [_c('q-img', {\n          staticClass: \"flex-center\",\n          attrs: {\n            \"contain\": \"\",\n            \"height\": \"8vh\",\n            \"spinner-color\": \"white\",\n            \"src\": `http://${_vm.local}/files/getFile?uuid=${item.imageUUID}`\n          }\n        })], 1)])];\n      }\n    }])\n  })], 1)], 1);\n};\nvar staticRenderFns = [];\n\n// CONCATENATED MODULE: ./src/components/otherFunctions/EvidenceBook.vue?vue&type=template&id=89d04d68&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url.js\nvar web_url = __webpack_require__(\"2b3d\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/web.url-search-params.js\nvar web_url_search_params = __webpack_require__(\"9861\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(\"5319\");\n\n// EXTERNAL MODULE: ./src/App.vue + 4 modules\nvar App = __webpack_require__(\"3dfd\");\n\n// EXTERNAL MODULE: ./node_modules/axios/index.js\nvar axios = __webpack_require__(\"bc3a\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/otherFunctions/EvidenceBook.vue?vue&type=script&lang=js&\n\n\n\n\n\n/* harmony default export */ var EvidenceBookvue_type_script_lang_js_ = ({\n  name: 'EvidenceBook.vue',\n  data() {\n    return {\n      firstDate: null,\n      secondDate: this.createTodayDate(),\n      evidenceBookList: [],\n      success: false,\n      message: null,\n      local: App[\"default\"].host\n    };\n  },\n  methods: {\n    getRecordsFromBook(firstDate, secondDate) {\n      fetch(`http://${this.local}/evidence/?firstDate=${firstDate}&secondDate=${secondDate}`, {\n        method: 'GET'\n      }).then(response => response.json()).then(response => {\n        this.evidenceBookList = response;\n      });\n    },\n    getJudgingReport(firstDate, secondDate) {\n      if (firstDate != null && secondDate != null) {\n        axios_default()({\n          url: `http://${this.local}/files/downloadEvidenceBook?firstDate=${firstDate}&secondDate=${secondDate}`,\n          method: 'GET',\n          responseType: 'blob'\n        }).then(response => {\n          const fileURL = window.URL.createObjectURL(new Blob([response.data]));\n          const fileLink = document.createElement('a');\n          fileLink.href = fileURL;\n          fileLink.setAttribute('download', 'Książka pobytu na strzelnicy od ' + firstDate + ' do ' + secondDate + '.pdf');\n          document.body.appendChild(fileLink);\n          fileLink.click();\n          this.listDownload = true;\n          this.autoClose();\n        });\n      }\n    },\n    convertDateTime(dateTime) {\n      return dateTime.replace('T', ' ').substring(0, 19);\n    },\n    showloading() {\n      this.$q.loading.show({\n        message: 'Dzieje się coś ważnego... Poczekaj'\n      });\n      this.timer = setTimeout(() => {\n        this.$q.loading.hide();\n        this.timer = 0;\n      }, 2000);\n    },\n    darkSet() {\n      return JSON.parse(window.localStorage.getItem('BackgroundDark'));\n    },\n    createTodayDate() {\n      const date = new Date();\n      let month = 0;\n      let day = 0;\n      if (date.getMonth() + 1 < 10) {\n        month = '0' + (date.getMonth() + 1);\n      } else {\n        month = date.getMonth() + 1;\n      }\n      if (date.getDate() < 10) {\n        day = '0' + date.getDate();\n      } else {\n        day = date.getDate();\n      }\n      return date.getFullYear() + '-' + month + '-' + day;\n    },\n    autoClose() {\n      setTimeout(() => {\n        this.success = false;\n        this.message = null;\n      }, 2000);\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/otherFunctions/EvidenceBook.vue?vue&type=script&lang=js&\n /* harmony default export */ var otherFunctions_EvidenceBookvue_type_script_lang_js_ = (EvidenceBookvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 1 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/popup-proxy/QPopupProxy.js\nvar QPopupProxy = __webpack_require__(\"7cbe\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/date/QDate.js\nvar QDate = __webpack_require__(\"52ee\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js + 2 modules\nvar QVirtualScroll = __webpack_require__(\"a12b\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/img/QImg.js + 1 modules\nvar QImg = __webpack_require__(\"068f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/ClosePopup.js\nvar ClosePopup = __webpack_require__(\"7f67\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/components/otherFunctions/EvidenceBook.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  otherFunctions_EvidenceBookvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var EvidenceBook = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QCardSection: QCardSection[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QPopupProxy: QPopupProxy[\"a\" /* default */],QDate: QDate[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QVirtualScroll: QVirtualScroll[\"a\" /* default */],QImg: QImg[\"a\" /* default */]});runtime_auto_import_default()(component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}