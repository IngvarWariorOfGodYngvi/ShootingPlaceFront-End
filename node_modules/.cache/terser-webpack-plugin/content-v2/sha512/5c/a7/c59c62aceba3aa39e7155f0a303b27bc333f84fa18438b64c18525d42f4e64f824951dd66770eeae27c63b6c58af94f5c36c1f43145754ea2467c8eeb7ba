{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[29],{d897:function(t,e,s){\"use strict\";s.r(e);var i=function(){var t=this,e=t._self._c;return e(\"div\",[e(\"div\",[t.mailingList.length>0?e(\"q-page-sticky\",{staticStyle:{\"z-index\":\"10\"},attrs:{position:\"top-right\",expand:\"\",offset:[6,6]}},[e(\"q-tooltip\",{staticClass:\"bg-primary\",attrs:{anchor:\"center start\",\"hide-delay\":200,\"content-class\":\"bg-primary\"}},[e(\"div\",{staticClass:\"text-h6 text-center\"},[t._v(\"\\n          LISTA MAILINGOWA\\n        \")])]),e(\"q-fab\",{staticStyle:{border:\"2px solid white\"},attrs:{\"label-position\":\"bottom\",color:\"secondary\",icon:\"email\",direction:\"down\"},model:{value:t.mailing,callback:function(e){t.mailing=e},expression:\"mailing\"}},[t.mailingList.length>0?e(\"div\",{staticClass:\"bg-secondary text-white\",staticStyle:{\"border-radius\":\"5% 5% 0 0\",\"margin-right\":\"15vw\",\"font-size\":\"small\",width:\"18vw\"}},[e(\"q-btn\",{staticClass:\"text-caption full-width\",attrs:{dense:\"\",align:\"center\",label:\"wyczyść listę\",color:\"primary\",icon:\"delete\",rounded:\"\"},on:{click:function(e){return t.clearMailingList()}}}),e(\"q-btn\",{staticClass:\"text-caption full-width\",attrs:{dense:\"\",align:\"center\",label:\"kopiuj \"+t.mailingList.length+\" do schowka\",color:\"primary\",icon:\"content_copy\",rounded:\"\"},on:{click:function(e){return t.unsecuredCopyToClipboard(t.mailingList)}}}),e(\"q-virtual-scroll\",{staticClass:\"text-center\",staticStyle:{height:\"auto\",\"max-height\":\"40vh\",width:\"auto\"},attrs:{items:t.mailingList},scopedSlots:t._u([{key:\"default\",fn:function({item:s,index:i}){return[e(\"q-item\",{staticStyle:{padding:\"0 10px 0 10px\",margin:\"0\"},attrs:{dense:\"\"}},[t._v(\"\\n                \"+t._s(i+1)+\" \"+t._s(s)+\"\\n              \")])]}}],null,!1,1183026765)})],1):t._e()])],1):t._e()],1),e(\"q-card\",{staticClass:\"text-body2 bg-dark\"},[e(\"div\",{staticClass:\"row\"},[e(\"div\",{staticClass:\"q-pa-md text-left col full-width no-outline text-h5 text-bold\"},[t._v(\"Ilość osób\\n        \"+t._s(t.list.length)+\"\\n      \")]),e(\"div\",{staticClass:\"q-pa-md text-right\"},[t.mobile?t._e():e(\"q-btn\",{attrs:{dense:\"\",color:\"primary\",label:\"Oznacz wybrane jako opłacone w pzss\"},on:{click:function(e){t.paymentLicenseAlertPZSS=!0}}},[t._v(\"\\n          (\"+t._s(t.payPZSSList.length)+\")\\n        \")])],1)]),e(\"div\",{staticClass:\"row text-caption\"},[e(\"div\",{staticClass:\"col\",on:{click:function(e){return t.sortF(\"name\")}}},[t._v(\"lp \"),e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortName?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Nazwisko i imię\")],1),e(\"div\",{staticClass:\"col-1\",on:{click:function(e){return t.sortF(\"status\")}}},[e(\"div\",[e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortStatus?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Status\")],1)]),e(\"div\",{staticClass:\"col-2\",on:{click:function(e){return t.sortF(\"group\")}}},[e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortGroup?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Grupa\")],1),e(\"div\",{staticClass:\"col-2\",on:{click:function(e){return t.sortF(\"date\")}}},[e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortDate?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Data Wpłaty\")],1),e(\"div\",{staticClass:\"col-2\",on:{click:function(e){return t.sortF(\"year\")}}},[e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortYear?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Na Rok\")],1),e(\"div\",{staticClass:\"col-2\",on:{click:function(e){return t.sortF(\"isNew\")}}},[e(\"q-icon\",{attrs:{size:\"2em\",name:t.sortIsNew?\"arrow_drop_up\":\"arrow_drop_down\"}}),t._v(\"Nowa / Przedłużenie\")],1)]),e(\"q-scroll-area\",{staticStyle:{height:\"50vh\"}},[t.visible?t._e():e(\"div\",t._l(t.list,(function(s,i){return e(\"div\",{key:i,staticClass:\"row hover1 items-center\",staticStyle:{\"min-height\":\"2em\"},on:{click:function(e){return e.ctrlKey?t.pushOrRemoveEmailToList(s.legitimationNumber):null},dblclick:function(e){if(e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)return null;t.legitimationNumber=s.legitimationNumber,t.memberDial=!0}}},[e(\"Tooltip2clickToShow\"),e(\"q-checkbox\",{attrs:{dense:\"\",val:s.paymentUuid,\"left-label\":\"\"},model:{value:t.payPZSSList,callback:function(e){t.payPZSSList=e},expression:\"payPZSSList\"}},[t._v(t._s(i+1)+\".\")]),e(\"div\",{staticClass:\"col\"},[t._v(\" \\n            \"+t._s(s.secondName)+\" \"+t._s(s.firstName)+\"\\n          \")]),e(\"div\",{class:\"col-1 \"+(s.active?\"\":\"bg-red-4 text-black\"),staticStyle:{\"border-radius\":\"2px\"}},[t._v(\"\\n            \"+t._s(s.active?\"Aktywny\":\"Nieaktywny\")+\"\\n          \")]),e(\"div\",{staticClass:\"col-2\"},[t._v(\"\\n            \"+t._s(s.adult?\"Grupa Ogólna\":\"Grupa Młodzieżowa\")+\"\\n          \")]),e(\"div\",{staticClass:\"col-2\"},[t._v(\"\\n            \"+t._s(s.date)+\"\\n          \")]),e(\"div\",{staticClass:\"col-2\"},[t._v(\"\\n            \"+t._s(s.validForYear)+\"\\n          \")]),e(\"div\",{staticClass:\"col-2\",class:s.new?\"bg-warning\":\"\"},[t._v(\"\\n            \"+t._s(s.new?\"Nowa\":\"Przedłużenie\")+\"\\n          \")])],1)})),0),e(\"q-inner-loading\",{attrs:{showing:t.visible,label:\"Przetwarzanie...\",color:\"primary\"}})],1)],1),e(\"q-dialog\",{staticStyle:{\"min-width\":\"80vw\"},model:{value:t.memberDial,callback:function(e){t.memberDial=e},expression:\"memberDial\"}},[e(\"q-card\",{staticClass:\"bg-dark\",staticStyle:{\"min-width\":\"80vw\"}},[e(\"q-card-section\",{staticClass:\"flex-center\"},[e(\"Member\",{attrs:{\"member-number-legitimation\":t.legitimationNumber},on:{\"hook:destroyed\":function(e){return t.getAllLicencePayment()}}})],1),e(\"q-card-actions\",{attrs:{align:\"right\"}},[e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"text-color\":\"white\",label:\"zamknij\",color:\"primary\"},on:{click:function(e){t.pinCode=null}}})],1)],1)],1),e(\"q-dialog\",{attrs:{position:\"standard\"},model:{value:t.failure,callback:function(e){t.failure=e},expression:\"failure\"}},[e(\"q-card\",{staticClass:\"bg-warning\"},[e(\"q-card-section\",[null!=t.message?e(\"div\",{staticClass:\"text-h6\"},[t._v(t._s(t.message))]):e(\"div\",{staticClass:\"text-h6\"},[t._v(\"Nie można wykonać żądania. Sprawdź poprawność danych.\")])])],1)],1),e(\"q-dialog\",{attrs:{position:\"top\"},model:{value:t.success,callback:function(e){t.success=e},expression:\"success\"}},[e(\"q-card\",[e(\"q-card-section\",[null!=t.message?e(\"div\",{staticClass:\"text-h6\"},[t._v(t._s(t.message))]):t._e()])],1)],1),e(\"q-dialog\",{model:{value:t.paymentLicenseAlertPZSS,callback:function(e){t.paymentLicenseAlertPZSS=e},expression:\"paymentLicenseAlertPZSS\"}},[e(\"q-card\",{staticClass:\"bg-dark text-positive\"},[e(\"q-card-section\",[e(\"div\",{staticClass:\"text-h6\"},[t._v(\"Czy opłacić licencje?\")])]),e(\"q-card-actions\",{attrs:{align:\"right\"}},[e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"text-color\":\"white\",label:\"anuluj\",color:\"primary\"}}),e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"text-color\":\"white\",label:\"Opłać\",color:\"primary\"},on:{click:function(e){t.pinWindowPZSS=!0}}})],1)],1)],1),e(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:t.pinWindowPZSS,callback:function(e){t.pinWindowPZSS=e},expression:\"pinWindowPZSS\"}},[e(\"q-card\",{staticClass:\"bg-red-5 text-center\"},[e(\"q-card-section\",{staticClass:\"flex-center\"},[e(\"h3\",[e(\"span\",{staticClass:\"q-ml-sm\"},[t._v(\"Wprowadź kod potwierdzający\")])]),e(\"q-input\",{staticClass:\"bg-yellow text-bold\",attrs:{autofocus:\"\",type:\"password\",filled:\"\",color:\"Yellow\",mask:\"####\"},on:{keypress:function(e){if(!e.type.indexOf(\"key\")&&t._k(e.keyCode,\"enter\",13,e.key,\"Enter\"))return null;t.toggleHistoryPayment(),t.pinWindowPZSS=!1}},model:{value:t.pinCode,callback:function(e){t.pinCode=e},expression:\"pinCode\"}})],1),e(\"q-card-actions\",{attrs:{align:\"right\"}},[e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"anuluj\",color:\"black\"},on:{click:function(e){t.pinCode=null}}}),e(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Przedłuż\",color:\"black\"},on:{click:function(e){t.toggleHistoryPayment(),t.pinCode=null}}})],1)],1)],1)],1)},a=[],o=(s(\"caad\"),s(\"14d9\"),s(\"3dfd\")),n=s(\"a8bc\"),l=s(\"d6c6\"),r={name:\"AllLicencePayment\",data(){return{mobile:o[\"default\"].mobile,main:o[\"default\"].main,visible:!0,mailingList:JSON.parse(window.localStorage.getItem(\"mailingList\")),mailing:!0,list:[],payPZSSList:[],sortName:!1,sortStatus:!1,sortGroup:!1,sortDate:!1,sortYear:!1,sortIsNew:!1,memberName:\"\",memberDial:!1,pinCode:null,legitimationNumber:null,paymentLicenseAlertPZSS:!1,pinWindowPZSS:!1,success:!1,failure:!1,message:null,local:o[\"default\"].host}},components:{Member:Object(n[\"a\"])({componentFactory:()=>Promise.all([s.e(0),s.e(1)]).then(s.bind(null,\"d95e\")),loading:l[\"a\"]}),Tooltip2clickToShow:Object(n[\"a\"])({componentFactory:()=>s.e(1).then(s.bind(null,\"8857\")),loading:l[\"a\"]})},created(){this.getAllLicencePayment()},methods:{getAllLicencePayment(){fetch(`${this.local}/license/allLicencePayment`,{method:\"GET\"}).then((t=>t.json())).then((t=>{this.list=t,this.visible=!1}))},pushOrRemoveEmailToList(t){console.log(t),fetch(`${this.local}/member/getMemberEmail?number=${t}`,{method:\"GET\"}).then((t=>t.text())).then((t=>{console.log(t);const e=JSON.parse(window.localStorage.getItem(\"mailingList\"));if(e.includes(t)){const s=this.mailingList.indexOf(t);e.splice(s,s+1)}else e.push(t);window.localStorage.setItem(\"mailingList\",JSON.stringify(e)),this.mailingList=e}))},clearMailingList(){window.localStorage.setItem(\"mailingList\",JSON.stringify([])),this.mailingList=[]},copyClipboard(t){let e=t[0];if(t.length>1)for(let s=1;s<t.length;s++)e=e+\";\"+t[s];window.isSecureContext=!1,navigator.clipboard.writeText(e),this.message=\"Skopiowano listę do schowka\",this.success=!0,this.autoClose()},unsecuredCopyToClipboard(t){const e=document.createElement(\"textarea\");let s=t[0];if(t.length>1)for(let a=1;a<t.length;a++)s=s+\";\"+t[a];e.value=t,document.body.appendChild(e),e.focus(),e.select();try{document.execCommand(\"copy\")}catch(i){console.error(\"Unable to copy to clipboard\",i)}document.body.removeChild(e),this.message=\"Skopiowano listę do schowka\",this.success=!0,this.autoClose()},convertDate(t){const e=new Date(t);let s=e.getMonth()+1,i=e.getDate();return i<10&&(i=\"0\"+i),s+1<10&&(s=\"0\"+(s+1)),i+\"-\"+s+\"-\"+e.getFullYear()},addLicenseHistoryPayment(t){fetch(`${this.local}/license/history/${t}`,{method:\"PUT\",headers:{\"Content-Type\":\"application/json\"}}).then((t=>{200===t.status?t.text().then((t=>{this.message=t,this.success=!0,this.getAllLicencePayment(),this.autoClose()})):t.text().then((t=>{this.message=t,this.failure=!0,this.autoClose()}))}))},toggleHistoryPayment(){fetch(`${this.local}/license/paymentToggleArray?paymentUUIDs=${this.payPZSSList}&pinCode=${this.pinCode}&condition=true`,{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"}}).then((t=>{200===t.status?t.text().then((t=>{this.message=t,this.success=!0,this.payPZSSList=[],this.getAllLicencePayment(),this.autoClose()})):t.text().then((t=>{this.message=t,this.failure=!0,this.autoClose()}))}))},sortF(t){\"name\"===t&&(this.sortName?(this.list.sort(((t,e)=>(\"\"+t.secondName).localeCompare(e.secondName))),this.sortName=!this.sortName):(this.list.sort(((t,e)=>(\"\"+e.secondName).localeCompare(t.secondName))),this.sortName=!this.sortName)),\"status\"===t&&(this.sortStatus?(this.list.sort(((t,e)=>t.active-e.active)),this.sortStatus=!this.sortStatus):(this.list.sort(((t,e)=>e.active-t.active)),this.sortStatus=!this.sortStatus)),\"date\"===t&&(this.sortDate?(this.list.sort(((t,e)=>new Date(t.date)-new Date(e.date))),this.sortDate=!this.sortDate):(this.list.sort(((t,e)=>new Date(e.date)-new Date(t.date))),this.sortDate=!this.sortDate)),\"group\"===t&&(this.sortGroup?(this.list.sort(((t,e)=>t.adult-e.adult)),this.sortGroup=!this.sortGroup):(this.list.sort(((t,e)=>e.adult-t.adult)),this.sortGroup=!this.sortGroup)),\"year\"===t&&(this.sortYear?(this.list.sort(((t,e)=>t.validForYear-e.validForYear)),this.sortYear=!this.sortYear):(this.list.sort(((t,e)=>e.validForYear-t.validForYear)),this.sortYear=!this.sortYear)),\"isNew\"===t&&(this.sortIsNew,this.list.sort(((t,e)=>t.new-e.new)),this.sortIsNew=!this.sortIsNew)},autoClose(){setTimeout((()=>{this.success=!1,this.failure=!1,this.message=null,this.pinCode=null}),2e3)}}},c=r,d=s(\"2877\"),u=s(\"de5e\"),m=s(\"05c0\"),p=s(\"c294\"),h=s(\"9c40\"),g=s(\"a12b\"),w=s(\"66e5\"),v=s(\"f09f\"),y=s(\"0016\"),b=s(\"4983\"),f=s(\"8f8e\"),S=s(\"74f7\"),C=s(\"24e8\"),_=s(\"a370\"),k=s(\"4b7e\"),x=s(\"27f9\"),q=s(\"7f67\"),N=s(\"eebe\"),L=s.n(N),P=Object(d[\"a\"])(c,i,a,!1,null,null,null);e[\"default\"]=P.exports;L()(P,\"components\",{QPageSticky:u[\"a\"],QTooltip:m[\"a\"],QFab:p[\"a\"],QBtn:h[\"a\"],QVirtualScroll:g[\"a\"],QItem:w[\"a\"],QCard:v[\"a\"],QIcon:y[\"a\"],QScrollArea:b[\"a\"],QCheckbox:f[\"a\"],QInnerLoading:S[\"a\"],QDialog:C[\"a\"],QCardSection:_[\"a\"],QCardActions:k[\"a\"],QInput:x[\"a\"]}),L()(P,\"directives\",{ClosePopup:q[\"a\"]})}}]);","name":"js/29.a4e2d224.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[29],{\n\n/***/ \"d897\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--7!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/license/AllLicensePayment.vue?vue&type=template&id=5bc08eb6&\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c('div', [_c('div', [_vm.mailingList.length > 0 ? _c('q-page-sticky', {\n    staticStyle: {\n      \"z-index\": \"10\"\n    },\n    attrs: {\n      \"position\": \"top-right\",\n      \"expand\": \"\",\n      \"offset\": [6, 6]\n    }\n  }, [_c('q-tooltip', {\n    staticClass: \"bg-primary\",\n    attrs: {\n      \"anchor\": \"center start\",\n      \"hide-delay\": 200,\n      \"content-class\": \"bg-primary\"\n    }\n  }, [_c('div', {\n    staticClass: \"text-h6 text-center\"\n  }, [_vm._v(\"\\n          LISTA MAILINGOWA\\n        \")])]), _c('q-fab', {\n    staticStyle: {\n      \"border\": \"2px solid white\"\n    },\n    attrs: {\n      \"label-position\": \"bottom\",\n      \"color\": \"secondary\",\n      \"icon\": \"email\",\n      \"direction\": \"down\"\n    },\n    model: {\n      value: _vm.mailing,\n      callback: function ($$v) {\n        _vm.mailing = $$v;\n      },\n      expression: \"mailing\"\n    }\n  }, [_vm.mailingList.length > 0 ? _c('div', {\n    staticClass: \"bg-secondary text-white\",\n    staticStyle: {\n      \"border-radius\": \"5% 5% 0 0\",\n      \"margin-right\": \"15vw\",\n      \"font-size\": \"small\",\n      \"width\": \"18vw\"\n    }\n  }, [_c('q-btn', {\n    staticClass: \"text-caption full-width\",\n    attrs: {\n      \"dense\": \"\",\n      \"align\": \"center\",\n      \"label\": \"wyczyść listę\",\n      \"color\": \"primary\",\n      \"icon\": \"delete\",\n      \"rounded\": \"\"\n    },\n    on: {\n      \"click\": function ($event) {\n        return _vm.clearMailingList();\n      }\n    }\n  }), _c('q-btn', {\n    staticClass: \"text-caption full-width\",\n    attrs: {\n      \"dense\": \"\",\n      \"align\": \"center\",\n      \"label\": 'kopiuj ' + _vm.mailingList.length + ' do schowka',\n      \"color\": \"primary\",\n      \"icon\": \"content_copy\",\n      \"rounded\": \"\"\n    },\n    on: {\n      \"click\": function ($event) {\n        return _vm.unsecuredCopyToClipboard(_vm.mailingList);\n      }\n    }\n  }), _c('q-virtual-scroll', {\n    staticClass: \"text-center\",\n    staticStyle: {\n      \"height\": \"auto\",\n      \"max-height\": \"40vh\",\n      \"width\": \"auto\"\n    },\n    attrs: {\n      \"items\": _vm.mailingList\n    },\n    scopedSlots: _vm._u([{\n      key: \"default\",\n      fn: function ({\n        item,\n        index\n      }) {\n        return [_c('q-item', {\n          staticStyle: {\n            \"padding\": \"0 10px 0 10px\",\n            \"margin\": \"0\"\n          },\n          attrs: {\n            \"dense\": \"\"\n          }\n        }, [_vm._v(\"\\n                \" + _vm._s(index + 1) + \" \" + _vm._s(item) + \"\\n              \")])];\n      }\n    }], null, false, 1183026765)\n  })], 1) : _vm._e()])], 1) : _vm._e()], 1), _c('q-card', {\n    staticClass: \"text-body2 bg-dark\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"q-pa-md text-left col full-width no-outline text-h5 text-bold\"\n  }, [_vm._v(\"Ilość osób\\n        \" + _vm._s(_vm.list.length) + \"\\n      \")]), _c('div', {\n    staticClass: \"q-pa-md text-right\"\n  }, [!_vm.mobile ? _c('q-btn', {\n    attrs: {\n      \"dense\": \"\",\n      \"color\": \"primary\",\n      \"label\": \"Oznacz wybrane jako opłacone w pzss\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.paymentLicenseAlertPZSS = true;\n      }\n    }\n  }, [_vm._v(\"\\n          (\" + _vm._s(_vm.payPZSSList.length) + \")\\n        \")]) : _vm._e()], 1)]), _c('div', {\n    staticClass: \"row text-caption\"\n  }, [_c('div', {\n    staticClass: \"col\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('name');\n      }\n    }\n  }, [_vm._v(\"lp \"), _c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortName ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Nazwisko i imię\")], 1), _c('div', {\n    staticClass: \"col-1\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('status');\n      }\n    }\n  }, [_c('div', [_c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortStatus ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Status\")], 1)]), _c('div', {\n    staticClass: \"col-2\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('group');\n      }\n    }\n  }, [_c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortGroup ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Grupa\")], 1), _c('div', {\n    staticClass: \"col-2\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('date');\n      }\n    }\n  }, [_c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortDate ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Data Wpłaty\")], 1), _c('div', {\n    staticClass: \"col-2\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('year');\n      }\n    }\n  }, [_c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortYear ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Na Rok\")], 1), _c('div', {\n    staticClass: \"col-2\",\n    on: {\n      \"click\": function ($event) {\n        return _vm.sortF('isNew');\n      }\n    }\n  }, [_c('q-icon', {\n    attrs: {\n      \"size\": \"2em\",\n      \"name\": _vm.sortIsNew ? 'arrow_drop_up' : 'arrow_drop_down'\n    }\n  }), _vm._v(\"Nowa / Przedłużenie\")], 1)]), _c('q-scroll-area', {\n    staticStyle: {\n      \"height\": \"50vh\"\n    }\n  }, [!_vm.visible ? _c('div', _vm._l(_vm.list, function (item, index) {\n    return _c('div', {\n      key: index,\n      staticClass: \"row hover1 items-center\",\n      staticStyle: {\n        \"min-height\": \"2em\"\n      },\n      on: {\n        \"click\": function ($event) {\n          if (!$event.ctrlKey) return null;\n          return _vm.pushOrRemoveEmailToList(item.legitimationNumber);\n        },\n        \"dblclick\": function ($event) {\n          if ($event.ctrlKey || $event.shiftKey || $event.altKey || $event.metaKey) return null;\n          _vm.legitimationNumber = item.legitimationNumber;\n          _vm.memberDial = true;\n        }\n      }\n    }, [_c('Tooltip2clickToShow'), _c('q-checkbox', {\n      attrs: {\n        \"dense\": \"\",\n        \"val\": item.paymentUuid,\n        \"left-label\": \"\"\n      },\n      model: {\n        value: _vm.payPZSSList,\n        callback: function ($$v) {\n          _vm.payPZSSList = $$v;\n        },\n        expression: \"payPZSSList\"\n      }\n    }, [_vm._v(_vm._s(index + 1) + \".\")]), _c('div', {\n      staticClass: \"col\"\n    }, [_vm._v(\" \\n            \" + _vm._s(item.secondName) + \" \" + _vm._s(item.firstName) + \"\\n          \")]), _c('div', {\n      class: `col-1 ${item.active ? '' : 'bg-red-4 text-black'}`,\n      staticStyle: {\n        \"border-radius\": \"2px\"\n      }\n    }, [_vm._v(\"\\n            \" + _vm._s(item.active ? 'Aktywny' : 'Nieaktywny') + \"\\n          \")]), _c('div', {\n      staticClass: \"col-2\"\n    }, [_vm._v(\"\\n            \" + _vm._s(item.adult ? 'Grupa Ogólna' : 'Grupa Młodzieżowa') + \"\\n          \")]), _c('div', {\n      staticClass: \"col-2\"\n    }, [_vm._v(\"\\n            \" + _vm._s(item.date) + \"\\n          \")]), _c('div', {\n      staticClass: \"col-2\"\n    }, [_vm._v(\"\\n            \" + _vm._s(item.validForYear) + \"\\n          \")]), _c('div', {\n      staticClass: \"col-2\",\n      class: item.new ? 'bg-warning' : ''\n    }, [_vm._v(\"\\n            \" + _vm._s(item.new ? 'Nowa' : 'Przedłużenie') + \"\\n          \")])], 1);\n  }), 0) : _vm._e(), _c('q-inner-loading', {\n    attrs: {\n      \"showing\": _vm.visible,\n      \"label\": \"Przetwarzanie...\",\n      \"color\": \"primary\"\n    }\n  })], 1)], 1), _c('q-dialog', {\n    staticStyle: {\n      \"min-width\": \"80vw\"\n    },\n    model: {\n      value: _vm.memberDial,\n      callback: function ($$v) {\n        _vm.memberDial = $$v;\n      },\n      expression: \"memberDial\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-dark\",\n    staticStyle: {\n      \"min-width\": \"80vw\"\n    }\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center\"\n  }, [_c('Member', {\n    attrs: {\n      \"member-number-legitimation\": _vm.legitimationNumber\n    },\n    on: {\n      \"hook:destroyed\": function ($event) {\n        return _vm.getAllLicencePayment();\n      }\n    }\n  })], 1), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"text-color\": \"white\",\n      \"label\": \"zamknij\",\n      \"color\": \"primary\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.pinCode = null;\n      }\n    }\n  })], 1)], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": \"standard\"\n    },\n    model: {\n      value: _vm.failure,\n      callback: function ($$v) {\n        _vm.failure = $$v;\n      },\n      expression: \"failure\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-warning\"\n  }, [_c('q-card-section', [_vm.message != null ? _c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))]) : _c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(\"Nie można wykonać żądania. Sprawdź poprawność danych.\")])])], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": \"top\"\n    },\n    model: {\n      value: _vm.success,\n      callback: function ($$v) {\n        _vm.success = $$v;\n      },\n      expression: \"success\"\n    }\n  }, [_c('q-card', [_c('q-card-section', [_vm.message != null ? _c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))]) : _vm._e()])], 1)], 1), _c('q-dialog', {\n    model: {\n      value: _vm.paymentLicenseAlertPZSS,\n      callback: function ($$v) {\n        _vm.paymentLicenseAlertPZSS = $$v;\n      },\n      expression: \"paymentLicenseAlertPZSS\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-dark text-positive\"\n  }, [_c('q-card-section', [_c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(\"Czy opłacić licencje?\")])]), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"text-color\": \"white\",\n      \"label\": \"anuluj\",\n      \"color\": \"primary\"\n    }\n  }), _c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"text-color\": \"white\",\n      \"label\": \"Opłać\",\n      \"color\": \"primary\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.pinWindowPZSS = true;\n      }\n    }\n  })], 1)], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"persistent\": \"\"\n    },\n    model: {\n      value: _vm.pinWindowPZSS,\n      callback: function ($$v) {\n        _vm.pinWindowPZSS = $$v;\n      },\n      expression: \"pinWindowPZSS\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-red-5 text-center\"\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center\"\n  }, [_c('h3', [_c('span', {\n    staticClass: \"q-ml-sm\"\n  }, [_vm._v(\"Wprowadź kod potwierdzający\")])]), _c('q-input', {\n    staticClass: \"bg-yellow text-bold\",\n    attrs: {\n      \"autofocus\": \"\",\n      \"type\": \"password\",\n      \"filled\": \"\",\n      \"color\": \"Yellow\",\n      \"mask\": \"####\"\n    },\n    on: {\n      \"keypress\": function ($event) {\n        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) return null;\n        _vm.toggleHistoryPayment();\n        _vm.pinWindowPZSS = false;\n      }\n    },\n    model: {\n      value: _vm.pinCode,\n      callback: function ($$v) {\n        _vm.pinCode = $$v;\n      },\n      expression: \"pinCode\"\n    }\n  })], 1), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"label\": \"anuluj\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.pinCode = null;\n      }\n    }\n  }), _c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"label\": \"Przedłuż\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.toggleHistoryPayment();\n        _vm.pinCode = null;\n      }\n    }\n  })], 1)], 1)], 1)], 1);\n};\nvar staticRenderFns = [];\n\n// CONCATENATED MODULE: ./src/components/license/AllLicensePayment.vue?vue&type=template&id=5bc08eb6&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.includes.js\nvar es_array_includes = __webpack_require__(\"caad\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js\nvar es_array_push = __webpack_require__(\"14d9\");\n\n// EXTERNAL MODULE: ./src/App.vue + 4 modules\nvar App = __webpack_require__(\"3dfd\");\n\n// EXTERNAL MODULE: ./src/utils/lazyLoadComponent.js\nvar lazyLoadComponent = __webpack_require__(\"a8bc\");\n\n// EXTERNAL MODULE: ./src/utils/SkeletonBox.vue + 4 modules\nvar SkeletonBox = __webpack_require__(\"d6c6\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/license/AllLicensePayment.vue?vue&type=script&lang=js&\n\n\n\n\n\n// import { isWindows } from 'mobile-device-detect'\n\n/* harmony default export */ var AllLicensePaymentvue_type_script_lang_js_ = ({\n  name: 'AllLicencePayment',\n  data() {\n    return {\n      mobile: App[\"default\"].mobile,\n      main: App[\"default\"].main,\n      visible: true,\n      mailingList: JSON.parse(window.localStorage.getItem('mailingList')),\n      mailing: true,\n      list: [],\n      payPZSSList: [],\n      sortName: false,\n      sortStatus: false,\n      sortGroup: false,\n      sortDate: false,\n      sortYear: false,\n      sortIsNew: false,\n      memberName: '',\n      memberDial: false,\n      pinCode: null,\n      legitimationNumber: null,\n      paymentLicenseAlertPZSS: false,\n      pinWindowPZSS: false,\n      success: false,\n      failure: false,\n      message: null,\n      local: App[\"default\"].host\n    };\n  },\n  components: {\n    Member: Object(lazyLoadComponent[\"a\" /* default */])({\n      componentFactory: () => Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, \"d95e\")),\n      loading: SkeletonBox[\"a\" /* default */]\n    }),\n    Tooltip2clickToShow: Object(lazyLoadComponent[\"a\" /* default */])({\n      componentFactory: () => __webpack_require__.e(/* import() */ 1).then(__webpack_require__.bind(null, \"8857\")),\n      loading: SkeletonBox[\"a\" /* default */]\n    })\n  },\n  created() {\n    this.getAllLicencePayment();\n  },\n  methods: {\n    getAllLicencePayment() {\n      fetch(`${this.local}/license/allLicencePayment`, {\n        method: 'GET'\n      }).then(response => response.json()).then(response => {\n        this.list = response;\n        this.visible = false;\n      });\n    },\n    pushOrRemoveEmailToList(number) {\n      console.log(number);\n      fetch(`${this.local}/member/getMemberEmail?number=${number}`, {\n        method: 'GET'\n      }).then(response => response.text()).then(response => {\n        console.log(response);\n        const parse = JSON.parse(window.localStorage.getItem('mailingList'));\n        if (!parse.includes(response)) {\n          parse.push(response);\n        } else {\n          const number1 = this.mailingList.indexOf(response);\n          parse.splice(number1, number1 + 1);\n        }\n        window.localStorage.setItem('mailingList', JSON.stringify(parse));\n        this.mailingList = parse;\n      });\n    },\n    clearMailingList() {\n      window.localStorage.setItem('mailingList', JSON.stringify([]));\n      this.mailingList = [];\n    },\n    copyClipboard(arr) {\n      let s = arr[0];\n      if (arr.length > 1) {\n        for (let i = 1; i < arr.length; i++) {\n          s = s + ';' + arr[i];\n        }\n      }\n      window.isSecureContext = false;\n      navigator.clipboard.writeText(s);\n      this.message = 'Skopiowano listę do schowka';\n      this.success = true;\n      this.autoClose();\n    },\n    unsecuredCopyToClipboard(arr) {\n      const textArea = document.createElement('textarea');\n      let s = arr[0];\n      if (arr.length > 1) {\n        for (let i = 1; i < arr.length; i++) {\n          s = s + ';' + arr[i];\n        }\n      }\n      textArea.value = arr;\n      document.body.appendChild(textArea);\n      textArea.focus();\n      textArea.select();\n      try {\n        document.execCommand('copy');\n      } catch (err) {\n        console.error('Unable to copy to clipboard', err);\n      }\n      document.body.removeChild(textArea);\n      this.message = 'Skopiowano listę do schowka';\n      this.success = true;\n      this.autoClose();\n    },\n    convertDate(date) {\n      const current = new Date(date);\n      let month = current.getMonth() + 1;\n      let day = current.getDate();\n      if (day < 10) {\n        day = '0' + day;\n      }\n      if (month + 1 < 10) {\n        month = '0' + (month + 1);\n      }\n      return day + '-' + month + '-' + current.getFullYear();\n    },\n    addLicenseHistoryPayment(uuid) {\n      fetch(`${this.local}/license/history/${uuid}`, {\n        method: 'PUT',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          response.text().then(response => {\n            this.message = response;\n            this.success = true;\n            this.getAllLicencePayment();\n            this.autoClose();\n          });\n        } else {\n          response.text().then(response => {\n            this.message = response;\n            this.failure = true;\n            this.autoClose();\n          });\n        }\n      });\n    },\n    toggleHistoryPayment() {\n      fetch(`${this.local}/license/paymentToggleArray?paymentUUIDs=${this.payPZSSList}&pinCode=${this.pinCode}&condition=true`, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          response.text().then(response => {\n            this.message = response;\n            this.success = true;\n            this.payPZSSList = [];\n            this.getAllLicencePayment();\n            this.autoClose();\n          });\n        } else {\n          response.text().then(response => {\n            this.message = response;\n            this.failure = true;\n            this.autoClose();\n          });\n        }\n      });\n    },\n    sortF(type) {\n      if (type === 'name') {\n        if (!this.sortName) {\n          this.list.sort((a, b) => ('' + b.secondName).localeCompare(a.secondName));\n          this.sortName = !this.sortName;\n        } else {\n          this.list.sort((a, b) => ('' + a.secondName).localeCompare(b.secondName));\n          this.sortName = !this.sortName;\n        }\n      }\n      if (type === 'status') {\n        if (!this.sortStatus) {\n          this.list.sort((a, b) => b.active - a.active);\n          this.sortStatus = !this.sortStatus;\n        } else {\n          this.list.sort((a, b) => a.active - b.active);\n          this.sortStatus = !this.sortStatus;\n        }\n      }\n      if (type === 'date') {\n        if (!this.sortDate) {\n          this.list.sort((a, b) => new Date(b.date) - new Date(a.date));\n          this.sortDate = !this.sortDate;\n        } else {\n          this.list.sort((a, b) => new Date(a.date) - new Date(b.date));\n          this.sortDate = !this.sortDate;\n        }\n      }\n      if (type === 'group') {\n        if (!this.sortGroup) {\n          this.list.sort((a, b) => b.adult - a.adult);\n          this.sortGroup = !this.sortGroup;\n        } else {\n          this.list.sort((a, b) => a.adult - b.adult);\n          this.sortGroup = !this.sortGroup;\n        }\n      }\n      if (type === 'year') {\n        if (!this.sortYear) {\n          this.list.sort((a, b) => b.validForYear - a.validForYear);\n          this.sortYear = !this.sortYear;\n        } else {\n          this.list.sort((a, b) => a.validForYear - b.validForYear);\n          this.sortYear = !this.sortYear;\n        }\n      }\n      if (type === 'isNew') {\n        if (!this.sortIsNew) {\n          this.list.sort((a, b) => a.new - b.new);\n          this.sortIsNew = !this.sortIsNew;\n        } else {\n          this.list.sort((a, b) => a.new - b.new);\n          this.sortIsNew = !this.sortIsNew;\n        }\n      }\n    },\n    autoClose() {\n      setTimeout(() => {\n        this.success = false;\n        this.failure = false;\n        this.message = null;\n        this.pinCode = null;\n      }, 2000);\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/license/AllLicensePayment.vue?vue&type=script&lang=js&\n /* harmony default export */ var license_AllLicensePaymentvue_type_script_lang_js_ = (AllLicensePaymentvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/page-sticky/QPageSticky.js\nvar QPageSticky = __webpack_require__(\"de5e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/tooltip/QTooltip.js\nvar QTooltip = __webpack_require__(\"05c0\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/fab/QFab.js + 1 modules\nvar QFab = __webpack_require__(\"c294\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js + 2 modules\nvar QVirtualScroll = __webpack_require__(\"a12b\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItem.js\nvar QItem = __webpack_require__(\"66e5\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/scroll-area/QScrollArea.js\nvar QScrollArea = __webpack_require__(\"4983\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/checkbox/QCheckbox.js\nvar QCheckbox = __webpack_require__(\"8f8e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/inner-loading/QInnerLoading.js\nvar QInnerLoading = __webpack_require__(\"74f7\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js\nvar QDialog = __webpack_require__(\"24e8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js\nvar QCardActions = __webpack_require__(\"4b7e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 1 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/ClosePopup.js\nvar ClosePopup = __webpack_require__(\"7f67\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/components/license/AllLicensePayment.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  license_AllLicensePaymentvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var AllLicensePayment = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QPageSticky: QPageSticky[\"a\" /* default */],QTooltip: QTooltip[\"a\" /* default */],QFab: QFab[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QVirtualScroll: QVirtualScroll[\"a\" /* default */],QItem: QItem[\"a\" /* default */],QCard: QCard[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QScrollArea: QScrollArea[\"a\" /* default */],QCheckbox: QCheckbox[\"a\" /* default */],QInnerLoading: QInnerLoading[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */],QInput: QInput[\"a\" /* default */]});runtime_auto_import_default()(component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}