{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[7],{cf45:function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"q-page\",{staticClass:\"row\",attrs:{padding:\"\"}},[a(\"q-card\",{staticClass:\"col-10\"},[a(\"div\",[a(\"q-btn\",{staticClass:\"col-1\",staticStyle:{},attrs:{label:\"dodaj do listy\",icon:\"book\"},on:{click:function(e){t.getOther(),t.addAmmo=!0}}})],1),t.ammoList.length<1?a(\"div\",{staticClass:\"text-h5 text-bold\"},[a(\"q-item\",[a(\"q-item-section\",[t._v(\"\\n            Brak aktywnej listy amunicji\\n          \")])],1)],1):t._e(),t.ammoList.length>=1?a(\"div\",{staticClass:\"col\"},[a(\"q-item\",{staticClass:\"col\"},[a(\"q-item-section\",{staticClass:\"text-h5 text-bold\"},[t._v(\"\\n          Lista Amunicji \"+t._s(t.ammoList[0].date)+\" numer \"+t._s(t.ammoList[0].number)+\"\\n        \")]),a(\"q-item-section\",{attrs:{side:\"\",top:\"\"}},[a(\"q-btn\",{attrs:{color:\"primary\",label:\"Zamknij listę\"},on:{click:function(e){t.uuid=t.ammoList[0].uuid,t.showloading(),t.closeEvidence(),t.getAmmoData(),t.getCLosedEvidence()}}})],1),a(\"q-item-section\",{attrs:{side:\"\",top:\"\"}},[a(\"q-btn\",{attrs:{color:\"primary\",label:\"Pobierz listę\"},on:{click:function(e){t.date=t.ammoList[0].date,t.uuid=t.ammoList[0].uuid,t.showloading(),t.getAmmoListPDF(),t.getAmmoData(),t.getCLosedEvidence()}}})],1)],1),t._l(t.ammoList,(function(e,o){return a(\"div\",{key:o},t._l(e.ammoInEvidenceEntityList,(function(e,o){return a(\"div\",{key:o},[a(\"q-item\",[a(\"q-item-label\",{staticClass:\"text-h6\"},[t._v(\"\\n                  kaliber\"+t._s(e.caliberName)+\"\\n                \")])],1),a(\"div\",{staticClass:\"col\"},[t._l(e.ammoUsedToEvidenceEntityList,(function(e,o){return a(\"div\",{key:o,staticClass:\"row\"},[a(\"q-field\",{staticClass:\"col-10\",attrs:{color:\"black\",standout:\"\",label:\"osoba\",\"stack-label\":\"\"},scopedSlots:t._u([{key:\"control\",fn:function(){return[a(\"div\",{staticClass:\"row\"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)}),a(\"q-field\",{staticClass:\"col-2\",attrs:{standout:\"\",label:\"ilość\",\"stack-label\":\"\"},scopedSlots:t._u([{key:\"control\",fn:function(){return[a(\"div\",{staticClass:\"row\"},[t._v(t._s(e.counter))])]},proxy:!0}],null,!0)})],1)})),a(\"div\",{staticClass:\"row reverse\"},[a(\"q-field\",{staticClass:\"col-2 bg-grey-4\",attrs:{standout:\"\",label:\"suma\",\"stack-label\":\"\"},scopedSlots:t._u([{key:\"control\",fn:function(){return[a(\"div\",[t._v(t._s(e.quantity))])]},proxy:!0}],null,!0)})],1)],2)],1)})),0)}))],2):t._e()]),a(\"q-card\",{staticClass:\"col-2\"},[a(\"div\",[a(\"q-item\",[a(\"q-item-label\",{staticClass:\"text-h5 text-bold\"},[t._v(\"\\n            Zamknięte listy\\n          \")])],1),t._l(t.ammoListClose,(function(e,o){return a(\"div\",{key:o},[a(\"q-item\",[a(\"q-btn\",{attrs:{label:e.date},on:{click:function(a){t.date=e.date,t.uuid=e.evidenceUUID,t.getAmmoListPDF()}}})],1)],1)}))],2)]),a(\"q-dialog\",{model:{value:t.ammunitionListAlert,callback:function(e){t.ammunitionListAlert=e},expression:\"ammunitionListAlert\"}},[a(\"q-card\",[a(\"q-card-section\",[a(\"div\",{staticClass:\"text-h6\"},[t._v(\"Pobrano listę \"+t._s(t.date))])]),a(\"q-card-actions\",{attrs:{align:\"right\"}},[a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"OK\",color:\"primary\"}})],1)],1)],1),a(\"q-dialog\",{model:{value:t.fail,callback:function(e){t.fail=e},expression:\"fail\"}},[a(\"q-card\",[a(\"q-card-section\",[a(\"div\",{staticClass:\"text-h6\"},[t._v(\"Wystąpił jakiś problem\")])]),a(\"q-card-actions\",{attrs:{align:\"right\"}},[a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"OK\",color:\"primary\"}})],1)],1)],1),a(\"q-dialog\",{model:{value:t.addAmmo,callback:function(e){t.addAmmo=e},expression:\"addAmmo\"}},[a(\"div\",{staticClass:\"bg-white\"},[a(\"div\",{staticClass:\"row\"},[a(\"q-select\",{staticClass:\"col\",attrs:{filled:\"\",\"use-input\":\"\",\"hide-selected\":\"\",\"fill-input\":\"\",\"input-debounce\":\"0\",options:t.options,label:\"Dodaj osobę z klubu\"},on:{input:function(e){t.otherName=\"0 0\"},filter:t.filterFn},scopedSlots:t._u([{key:\"no-option\",fn:function(){return[a(\"q-item\",[a(\"q-item-section\",{staticClass:\"text-grey\"},[t._v(\"\\n              Brak wyników\\n            \")])],1)]},proxy:!0}]),model:{value:t.memberName,callback:function(e){t.memberName=e},expression:\"memberName\"}}),a(\"q-select\",{staticClass:\"col\",attrs:{filled:\"\",\"use-input\":\"\",\"hide-selected\":\"\",\"fill-input\":\"\",\"input-debounce\":\"0\",options:t.options,label:\"Dodaj osobę spoza klubu\"},on:{input:function(e){t.memberName=\"0 0\"},filter:t.filterOther},scopedSlots:t._u([{key:\"no-option\",fn:function(){return[a(\"q-btn\",{staticClass:\"full-width\",attrs:{color:\"primary\",label:\"dodaj nową osobę\"},on:{click:function(e){t.addNewOtherPerson=!0}}})]},proxy:!0}]),model:{value:t.otherName,callback:function(e){t.otherName=e},expression:\"otherName\"}})],1),a(\"div\",{staticClass:\"row\"},[a(\"div\",{staticClass:\"full-width\"},t._l(t.calibers,(function(e,o){return a(\"q-radio\",{key:o,attrs:{val:e.uuid},model:{value:t.caliberUUID,callback:function(e){t.caliberUUID=e},expression:\"caliberUUID\"}},[a(\"q-field\",{staticStyle:{},attrs:{borderless:\"\"},scopedSlots:t._u([{key:\"control\",fn:function(){return[a(\"div\",{staticClass:\"full-width\"},[t._v(t._s(e.name))])]},proxy:!0}],null,!0)})],1)})),1)]),a(\"div\",{staticClass:\"row\"},[a(\"q-input\",{staticClass:\"full-width col\",attrs:{filled:\"\",placeholder:\"Tylko cyfry\",onkeypress:\"return (event.charCode > 44 && event.charCode < 58)\",label:\"Ilość Amunicji\"},model:{value:t.ammoQuantity,callback:function(e){t.ammoQuantity=e},expression:\"ammoQuantity\"}}),a(\"q-btn\",{staticClass:\"full-width col\",attrs:{color:\"primary\",label:\"wydaj amunicję\"},on:{click:function(e){return t.addMemberAndAmmoToCaliber()}}})],1)])]),a(\"q-dialog\",{model:{value:t.addNewOtherPerson,callback:function(e){t.addNewOtherPerson=e},expression:\"addNewOtherPerson\"}},[a(\"q-card\",{staticClass:\"full-width\"},[a(\"q-card-section\",[a(\"div\",{staticClass:\"text-h6\"},[t._v(\"Dodawanie nowej osoby spoza klubu\")]),a(\"q-item\",[a(\"q-input\",{staticClass:\"full-width\",attrs:{onkeypress:\"return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || (event.charCode > 210 && event.charCode < 400) || event.charCode == 32\",filled:\"\",label:\"Imię\"},model:{value:t.otherFirstName,callback:function(e){t.otherFirstName=e},expression:\"otherFirstName\"}})],1),a(\"q-item\",[a(\"q-input\",{staticClass:\"full-width\",attrs:{onkeypress:\"return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || (event.charCode > 210 && event.charCode < 400) || event.charCode == 32\",filled:\"\",label:\"Nazwisko\"},model:{value:t.otherSecondName,callback:function(e){t.otherSecondName=e},expression:\"otherSecondName\"}})],1),a(\"q-item\",[a(\"q-input\",{staticClass:\"full-width\",attrs:{onkeypress:\"return (event.charCode > 64 && event.charCode < 91) || (event.charCode > 96 && event.charCode < 123) || (event.charCode > 210 && event.charCode < 400) || event.charCode == 32\",filled:\"\",label:\"Nazwa Klubu\"},model:{value:t.clubName,callback:function(e){t.clubName=e},expression:\"clubName\"}})],1),a(\"q-item\",[a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Zapisz do bazy\",color:\"primary\"},on:{click:function(e){t.addOtherPerson()}}})],1)],1),a(\"q-card-actions\",{attrs:{align:\"right\"}},[a(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{flat:\"\",label:\"Zamknij\",color:\"primary\"},on:{click:function(e){t.otherFirstName=null,t.otherSecondName=null,t.clubName=null}}})],1)],1)],1)],1)},i=[],s=(a(\"c975\"),a(\"e6cf\"),a(\"ddb0\"),a(\"2b3d\"),a(\"2b0e\")),l=a(\"bc3a\"),n=a.n(l);const r=[];s[\"a\"].prototype.$axios=n.a;var c={data(){return{uuid:null,ammunitionListAlert:!1,listDate:null,ammoList:[],ammoListClose:[],date:\"\",fail:!1,otherName:null,ammoAdded:!1,addAmmo:!1,filters:[],filtersOther:[],calibers:[],caliberUUID:null,memberName:\"\",addNewOtherPerson:!1,ammoQuantity:null,otherFirstName:null,otherSecondName:null,clubName:null,options:r}},created(){this.getAmmoData(),this.getCLosedEvidence(),this.getListCalibers(),this.getOther(),this.getMembersNames()},methods:{showloading(){this.$q.loading.show({message:\"Dzieje się coś ważnego... Poczekaj\"}),this.timer=setTimeout(()=>{this.$q.loading.hide(),this.timer=0},1e3)},getAmmoData(){fetch(\"http://localhost:8080/ammoEvidence/evidence?state=true\",{method:\"GET\"}).then(t=>{t.json().then(t=>{this.ammoList=t})})},getCLosedEvidence(){fetch(\"http://localhost:8080/ammoEvidence/closedEvidences\",{method:\"GET\"}).then(t=>{t.json().then(t=>{this.ammoListClose=t})})},closeEvidence(){fetch(\"http://localhost:8080/ammoEvidence/ammo?evidenceUUID=\"+this.uuid,{method:\"PATCH\"}).then(t=>{200===t.status?(this.getAmmoData(),this.getCLosedEvidence()):this.fail=!0})},getMembersNames(){fetch(\"http://localhost:8080/member/getAllActiveMembersNames\",{method:\"GET\"}).then(t=>t.json()).then(t=>{this.filters=t})},getAmmoListPDF(){n()({url:\"http://localhost:8080/files/downloadAmmunitionList/\"+this.uuid,method:\"GET\",responseType:\"blob\"}).then(t=>{this.ammunitionListAlert=!0;var e=window.URL.createObjectURL(new Blob([t.data])),a=document.createElement(\"a\");a.href=e,a.setAttribute(\"download\",\"Lista_Rozliczenia_Amunicji_\"+this.date+\".pdf\"),document.body.appendChild(a),a.click()})},addMemberAndAmmoToCaliber(){const t=this.memberName.split(\" \");var e=t.length;const a=t[e-1],o=this.otherName.split(\" \");var i=o.length;const s=o[i-1];fetch(\"http://localhost:8080/ammoEvidence/ammo?caliberUUID=\"+this.caliberUUID+\"&legitimationNumber=\"+a+\"&counter=\"+this.ammoQuantity+\"&otherID=\"+s,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"}}).then(t=>{200===t.status?(this.getAmmoData(),this.showloading()):this.failure=!0})},getListCalibers(){fetch(\"http://localhost:8080/ammoEvidence/calibers\",{method:\"GET\"}).then(t=>t.json()).then(t=>{this.calibers=t})},getOther(){fetch(\"http://localhost:8080/other/\",{method:\"GET\"}).then(t=>t.json()).then(t=>{this.filtersOther=t})},addOtherPerson(){var t={firstName:this.otherFirstName,secondName:this.otherSecondName};fetch(\"http://localhost:8080/other?club=\"+this.clubName,{method:\"POST\",body:JSON.stringify(t),headers:{\"Content-Type\":\"application/json\"}}).then(t=>{201===t.status?this.getOther():this.failure=!0})},filterFn(t,e){e(\"\"!==t?()=>{const e=t.toLowerCase();this.options=this.filters.filter(t=>t.toLowerCase().indexOf(e)>-1)}:()=>{const e=t.toLowerCase();this.options=this.filters.filter(t=>t.toLowerCase().indexOf(e)>-1)})},filterOther(t,e){e(\"\"!==t?()=>{const e=t.toLowerCase();this.options=this.filtersOther.filter(t=>t.toLowerCase().indexOf(e)>-1)}:()=>{const e=t.toLowerCase();this.options=this.filtersOther.filter(t=>t.toLowerCase().indexOf(e)>-1)})}}},d=c,m=a(\"2877\"),u=a(\"9989\"),h=a(\"f09f\"),p=a(\"9c40\"),b=a(\"66e5\"),f=a(\"4074\"),v=a(\"0170\"),C=a(\"8572\"),w=a(\"24e8\"),y=a(\"a370\"),k=a(\"4b7e\"),q=a(\"ddd8\"),g=a(\"3786\"),N=a(\"27f9\"),L=a(\"7f67\"),_=a(\"eebe\"),x=a.n(_),A=Object(m[\"a\"])(d,o,i,!1,null,null,null);e[\"default\"]=A.exports;x()(A,\"components\",{QPage:u[\"a\"],QCard:h[\"a\"],QBtn:p[\"a\"],QItem:b[\"a\"],QItemSection:f[\"a\"],QItemLabel:v[\"a\"],QField:C[\"a\"],QDialog:w[\"a\"],QCardSection:y[\"a\"],QCardActions:k[\"a\"],QSelect:q[\"a\"],QRadio:g[\"a\"],QInput:N[\"a\"]}),x()(A,\"directives\",{ClosePopup:L[\"a\"]})}}]);","extractedComments":[]}