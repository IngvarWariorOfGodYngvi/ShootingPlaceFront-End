{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[34],{4081:function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e._self._c;return t(\"div\",[t(\"div\",{staticClass:\"text-body2 bg-white\"},[t(\"div\",{staticClass:\"row\"},[t(\"q-card-section\",{staticClass:\"col-3\"},[t(\"q-item\",{staticClass:\"col\"},[t(\"q-input\",{staticClass:\"full-width\",attrs:{color:\"black\",dense:\"\",filled:\"\",mask:\"####-##-##\",label:\"Data początkowa\"},scopedSlots:e._u([{key:\"append\",fn:function(){return[t(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"event\"}},[t(\"q-popup-proxy\",{ref:\"qDateProxy\",attrs:{\"transition-show\":\"scale\",\"transition-hide\":\"scale\"}},[t(\"q-date\",{on:{input:function(t){e.getSumLicensed()}},model:{value:e.firstDateLicense,callback:function(t){e.firstDateLicense=t},expression:\"firstDateLicense\"}},[t(\"div\",{staticClass:\"row items-center justify-end\"},[t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Zamknij\",color:\"primary\",flat:\"\"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.firstDateLicense,callback:function(t){e.firstDateLicense=t},expression:\"firstDateLicense\"}})],1),t(\"q-item\",{staticClass:\"col\"},[t(\"q-input\",{staticClass:\"full-width\",attrs:{color:\"black\",dense:\"\",filled:\"\",mask:\"####-##-##\",label:\"Data końcowa\"},scopedSlots:e._u([{key:\"append\",fn:function(){return[t(\"q-icon\",{staticClass:\"cursor-pointer\",attrs:{name:\"event\"}},[t(\"q-popup-proxy\",{ref:\"qDateProxy\",attrs:{\"transition-show\":\"scale\",\"transition-hide\":\"scale\"}},[t(\"q-date\",{on:{input:function(t){e.getSumLicensed()}},model:{value:e.secondDateLicense,callback:function(t){e.secondDateLicense=t},expression:\"secondDateLicense\"}},[t(\"div\",{staticClass:\"row items-center justify-end\"},[t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"Zamknij\",color:\"primary\",flat:\"\"}})],1)])],1)],1)]},proxy:!0}]),model:{value:e.secondDateLicense,callback:function(t){e.secondDateLicense=t},expression:\"secondDateLicense\"}})],1),t(\"div\",{staticClass:\"q-pa-md\"},[t(\"q-btn\",{on:{click:function(t){e.getSumLicensed()}}},[e._v(\"Wyszukaj\")])],1),t(\"div\",{staticClass:\"row\"},[t(\"q-radio\",{attrs:{val:!0},on:{input:function(t){e.paid=null,e.newLicense=null,e.getSumLicensed()}},model:{value:e.allLicense,callback:function(t){e.allLicense=t},expression:\"allLicense\"}},[e._v(\"Wszystkie\")]),t(\"q-radio\",{attrs:{val:!0},on:{input:function(t){e.allLicense=!1,e.newLicense=null,e.rearrangeSumLicensedTable()}},model:{value:e.paid,callback:function(t){e.paid=t},expression:\"paid\"}},[e._v(\"Opłacone\")]),t(\"q-radio\",{attrs:{val:!1},on:{input:function(t){e.allLicense=!1,e.newLicense=null,e.rearrangeSumLicensedTable()}},model:{value:e.paid,callback:function(t){e.paid=t},expression:\"paid\"}},[e._v(\"Nieopłacone\")]),t(\"q-radio\",{attrs:{val:!0},on:{input:function(t){e.allLicense=!1,e.paid=null,e.rearrangeSumLicensedTable()}},model:{value:e.newLicense,callback:function(t){e.newLicense=t},expression:\"newLicense\"}},[e._v(\"Nowe\")])],1),e.licenseArray.length>0?t(\"div\",{staticClass:\"row\"},[t(\"q-btn\",{attrs:{color:\"primary\"},on:{click:function(t){e.toggleLicenseAlert=!0}}},[e._v(\"Zatwierdź opłacenie zaznaczonych\")])],1):e._e()],1),t(\"q-card-section\",{staticClass:\"col\"},[e.quantitySumLicenseRearrangeTable.length<1?t(\"div\",{staticClass:\"q-pa-md self-center col full-width no-outline text-bold text-center text-h6\"},[e._v(\"^ Brak wyników opłaconych licencji - Wybierz daty ^\")]):e._e(),e.quantitySumLicenseRearrangeTable.length>0?t(\"div\",{staticClass:\"q-pa-md self-center col full-width no-outline text-bold text-center text-h6\"},[e._v(\"Ilość Licencji : \"+e._s(e.quantitySumLicenseRearrangeTable.length))]):e._e(),e.quantitySumLicenseRearrangeTable.length>0?t(\"q-virtual-scroll\",{staticClass:\"row full-width\",staticStyle:{height:\"50vh\"},attrs:{items:e.quantitySumLicenseRearrangeTable,type:\"table\",dense:\"\"},scopedSlots:e._u([{key:\"before\",fn:function(){return[t(\"thead\",{staticClass:\"thead-sticky text-left\"},[t(\"tr\",[t(\"th\",{staticClass:\"text-left\"},[t(\"div\",[e._v(e._s(e.quantitySumLicenseRearrangeTable.length)+\"Nazwisko i Imię\")])]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"10%\"}},[t(\"div\",[e._v(\"Numer\")]),t(\"div\",[e._v(\"Legitymacji\")])]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"10%\"}},[e._v(\"Grupa\")]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"10%\"}},[e._v(\"Status\")]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"15%\"}},[e._v(\"Data\")]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"15%\"}},[t(\"div\",[e._v(\"Nowa /\")]),t(\"div\",[e._v(\"Przedłużenie\")])]),t(\"th\",{staticClass:\"text-left\",staticStyle:{width:\"15%\"}},[t(\"div\",[e._v(\"Opłacone w\")]),t(\"div\",[e._v(\"PZSS\")])])])])]},proxy:!0},{key:\"default\",fn:function({item:a,index:s}){return[t(\"tr\",{key:s,staticClass:\"rounded\",staticStyle:{cursor:\"pointer\"},on:{dblclick:function(t){e.legitimationNumber=a.legitimationNumber,e.memberDial=!0}}},[t(\"q-tooltip\",{attrs:{\"content-class\":\"text-subtitle2\",anchor:\"top middle\"}},[e._v(\"kliknij dwa razy aby wyświetlić podgląd\\n              \")]),a.payInPZSSPortal?t(\"td\",{staticClass:\"text-left xyz\"},[t(\"b\",[e._v(e._s(s+1))]),e._v(\" \"+e._s(a.secondName)+\" \"+e._s(a.firstName)+\" \")]):t(\"td\",{staticClass:\"text-left xyz\"},[t(\"q-checkbox\",{attrs:{dense:\"\",val:a.licenseUUID,label:s+1+\" \"+a.secondName+\" \"+a.firstName},model:{value:e.licenseArray,callback:function(t){e.licenseArray=t},expression:\"licenseArray\"}})],1),t(\"td\",{staticClass:\"text-left\"},[e._v(\"nr leg. \"+e._s(a.legitimationNumber))]),a.adult?t(\"td\",{staticClass:\"text-left\"},[t(\"div\",[e._v(\"Ogólna\")])]):e._e(),a.adult?e._e():t(\"td\",{staticClass:\"text-left\"},[t(\"div\",[e._v(\"Młodzieżowa\")])]),a.active?t(\"td\",{staticClass:\"bg-green-3 text-left\"},[t(\"div\",[e._v(\"Aktywny\")])]):e._e(),a.active?e._e():t(\"td\",{staticClass:\"bg-warning text-left\"},[t(\"div\",[e._v(\"Nieaktywny\")])]),t(\"td\",{staticClass:\"text-left\"},[e._v(e._s(a.date))]),a.new?t(\"td\",{staticClass:\"bg-warning\"},[e._v(\"Nowa\")]):e._e(),a.new?e._e():t(\"td\",[e._v(\"Przedłużenie\")]),a.payInPZSSPortal?t(\"td\",{staticClass:\"bg-green-3\"},[e._v(\"Opłacone\")]):e._e(),a.payInPZSSPortal?e._e():t(\"td\",{staticClass:\"bg-red-3\"},[e._v(\"Nieopłacone\")])],1)]}}],null,!1,1995476682)}):e._e()],1)],1)]),t(\"q-dialog\",{staticStyle:{\"min-width\":\"80vw\"},model:{value:e.memberDial,callback:function(t){e.memberDial=t},expression:\"memberDial\"}},[t(\"q-card\",{staticStyle:{\"min-width\":\"80vw\"}},[t(\"q-card-section\",{staticClass:\"flex-center\"},[t(\"Member\",{attrs:{\"member-number-legitimation\":e.legitimationNumber}})],1),t(\"q-card-actions\",{attrs:{align:\"right\"}},[t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"zamknij\",color:\"black\"}})],1)],1)],1),t(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.toggleLicenseAlert,callback:function(t){e.toggleLicenseAlert=t},expression:\"toggleLicenseAlert\"}},[t(\"q-card\",{staticClass:\"bg-red-5 text-center\"},[t(\"q-card-section\",{staticClass:\"flex-center\"},[t(\"h3\",[t(\"span\",{staticClass:\"q-ml-sm\"},[e._v(\"Wprowadź kod potwierdzający\")])]),t(\"div\",[t(\"q-input\",{staticClass:\"bg-yellow text-bold\",attrs:{autofocus:\"\",type:\"password\",filled:\"\",color:\"Yellow\",mask:\"####\"},on:{keypress:function(t){if(!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\"))return null;e.toggleHistoryPayment(),e.toggleLicenseAlert=!1}},model:{value:e.code,callback:function(t){e.code=t},expression:\"code\"}})],1)]),t(\"q-card-actions\",{attrs:{align:\"right\"}},[t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"anuluj\",color:\"black\"},on:{click:function(t){e.code=null}}}),t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{id:\"3\",label:\"Zatwierdź zmiany\",color:\"black\"},on:{click:function(t){return e.toggleHistoryPayment()}}})],1)],1)],1),t(\"q-dialog\",{attrs:{position:\"top\"},model:{value:e.failure,callback:function(t){e.failure=t},expression:\"failure\"}},[t(\"q-card\",[t(\"q-card-section\",[null!=e.message?t(\"div\",{staticClass:\"text-h6\"},[e._v(e._s(e.message))]):e._e()])],1)],1),t(\"q-dialog\",{attrs:{position:\"top\"},model:{value:e.success,callback:function(t){e.success=t},expression:\"success\"}},[t(\"q-card\",[t(\"q-card-section\",[null!=e.message?t(\"div\",{staticClass:\"text-h6\"},[e._v(e._s(e.message))]):e._e()])],1)],1)],1)},i=[],n=(a(\"5319\"),a(\"14d9\"),a(\"3dfd\")),l=a(\"a8bc\"),c=a(\"d6c6\"),o={name:\"LicensePayments\",components:{Member:Object(l[\"a\"])({componentFactory:()=>Promise.all([a.e(0),a.e(1)]).then(a.bind(null,\"d95e\")),loading:c[\"a\"]})},data(){return{memberDial:!1,toggleLicenseAlert:!1,legitimationNumber:null,firstDateLicense:null,paid:null,newLicense:null,allLicense:!0,secondDateLicense:this.createTodayDate(),quantitySumLicense:[],quantitySumLicenseRearrangeTable:[],licenseArray:[],failure:!1,success:!1,message:null,code:null,local:n[\"a\"].host}},methods:{createTodayDate(){const e=new Date;let t=0,a=0;return t=e.getMonth()+1<10?\"0\"+(e.getMonth()+1):e.getMonth()+1,a=e.getDate()<10?\"0\"+e.getDate():e.getDate(),e.getFullYear()+\"/\"+t+\"/\"+a},getSumLicensed(){fetch(\"http://\"+this.local+\"/statistics/licenseSum?firstDate=\"+this.firstDateLicense.replace(/\\//gi,\"-\")+\"&secondDate=\"+this.secondDateLicense.replace(/\\//gi,\"-\"),{method:\"GET\"}).then((e=>{e.json().then((e=>{this.quantitySumLicense=e,this.quantitySumLicenseRearrangeTable=e,this.allLicense=!0}))}))},rearrangeSumLicensedTable(){const e=this.quantitySumLicense,t=[];if(null!==this.paid)for(let a=0;a<e.length;a++)e[a].payInPZSSPortal===this.paid&&t.push(e[a]);if(!0===this.newLicense)for(let a=0;a<e.length;a++)!0===e[a].new&&t.push(e[a]);this.quantitySumLicenseRearrangeTable=t},toggleHistoryPayment(){fetch(\"http://\"+this.local+\"/license/paymentToggleArray?paymentUUIDs=\"+this.licenseArray+\"&pinCode=\"+this.code,{method:\"PATCH\",headers:{\"Content-Type\":\"application/json\"}}).then((e=>{200===e.status?e.text().then((e=>{this.message=e,this.success=!0,this.allLicense=!0,this.paid=null,this.quantitySumLicense=[],this.licenseArray=[],this.getSumLicensed(),this.autoClose()})):e.text().then((e=>{this.message=e,this.failure=!0,this.autoClose()}))}))},autoClose(){setTimeout((()=>{this.failure=!1,this.success=!1,this.message=null,this.code=null}),2e3)}}},r=o,d=a(\"2877\"),u=a(\"a370\"),p=a(\"66e5\"),m=a(\"27f9\"),f=a(\"0016\"),h=a(\"7cbe\"),v=a(\"52ee\"),g=a(\"9c40\"),y=a(\"3786\"),b=a(\"a12b\"),w=a(\"05c0\"),L=a(\"8f8e\"),_=a(\"24e8\"),x=a(\"f09f\"),q=a(\"4b7e\"),k=a(\"7f67\"),C=a(\"eebe\"),S=a.n(C),D=Object(d[\"a\"])(r,s,i,!1,null,\"3e67ba0c\",null);t[\"default\"]=D.exports;S()(D,\"components\",{QCardSection:u[\"a\"],QItem:p[\"a\"],QInput:m[\"a\"],QIcon:f[\"a\"],QPopupProxy:h[\"a\"],QDate:v[\"a\"],QBtn:g[\"a\"],QRadio:y[\"a\"],QVirtualScroll:b[\"a\"],QTooltip:w[\"a\"],QCheckbox:L[\"a\"],QDialog:_[\"a\"],QCard:x[\"a\"],QCardActions:q[\"a\"]}),S()(D,\"directives\",{ClosePopup:k[\"a\"]})}}]);","name":"js/34.48005918.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[34],{\n\n/***/ \"4081\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--7!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/statistics/LicensePayments.vue?vue&type=template&id=3e67ba0c&scoped=true&\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c('div', [_c('div', {\n    staticClass: \"text-body2 bg-white\"\n  }, [_c('div', {\n    staticClass: \"row\"\n  }, [_c('q-card-section', {\n    staticClass: \"col-3\"\n  }, [_c('q-item', {\n    staticClass: \"col\"\n  }, [_c('q-input', {\n    staticClass: \"full-width\",\n    attrs: {\n      \"color\": \"black\",\n      \"dense\": \"\",\n      \"filled\": \"\",\n      \"mask\": \"####-##-##\",\n      \"label\": \"Data początkowa\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"append\",\n      fn: function () {\n        return [_c('q-icon', {\n          staticClass: \"cursor-pointer\",\n          attrs: {\n            \"name\": \"event\"\n          }\n        }, [_c('q-popup-proxy', {\n          ref: \"qDateProxy\",\n          attrs: {\n            \"transition-show\": \"scale\",\n            \"transition-hide\": \"scale\"\n          }\n        }, [_c('q-date', {\n          on: {\n            \"input\": function ($event) {\n              _vm.getSumLicensed();\n            }\n          },\n          model: {\n            value: _vm.firstDateLicense,\n            callback: function ($$v) {\n              _vm.firstDateLicense = $$v;\n            },\n            expression: \"firstDateLicense\"\n          }\n        }, [_c('div', {\n          staticClass: \"row items-center justify-end\"\n        }, [_c('q-btn', {\n          directives: [{\n            name: \"close-popup\",\n            rawName: \"v-close-popup\"\n          }],\n          attrs: {\n            \"label\": \"Zamknij\",\n            \"color\": \"primary\",\n            \"flat\": \"\"\n          }\n        })], 1)])], 1)], 1)];\n      },\n      proxy: true\n    }]),\n    model: {\n      value: _vm.firstDateLicense,\n      callback: function ($$v) {\n        _vm.firstDateLicense = $$v;\n      },\n      expression: \"firstDateLicense\"\n    }\n  })], 1), _c('q-item', {\n    staticClass: \"col\"\n  }, [_c('q-input', {\n    staticClass: \"full-width\",\n    attrs: {\n      \"color\": \"black\",\n      \"dense\": \"\",\n      \"filled\": \"\",\n      \"mask\": \"####-##-##\",\n      \"label\": \"Data końcowa\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"append\",\n      fn: function () {\n        return [_c('q-icon', {\n          staticClass: \"cursor-pointer\",\n          attrs: {\n            \"name\": \"event\"\n          }\n        }, [_c('q-popup-proxy', {\n          ref: \"qDateProxy\",\n          attrs: {\n            \"transition-show\": \"scale\",\n            \"transition-hide\": \"scale\"\n          }\n        }, [_c('q-date', {\n          on: {\n            \"input\": function ($event) {\n              _vm.getSumLicensed();\n            }\n          },\n          model: {\n            value: _vm.secondDateLicense,\n            callback: function ($$v) {\n              _vm.secondDateLicense = $$v;\n            },\n            expression: \"secondDateLicense\"\n          }\n        }, [_c('div', {\n          staticClass: \"row items-center justify-end\"\n        }, [_c('q-btn', {\n          directives: [{\n            name: \"close-popup\",\n            rawName: \"v-close-popup\"\n          }],\n          attrs: {\n            \"label\": \"Zamknij\",\n            \"color\": \"primary\",\n            \"flat\": \"\"\n          }\n        })], 1)])], 1)], 1)];\n      },\n      proxy: true\n    }]),\n    model: {\n      value: _vm.secondDateLicense,\n      callback: function ($$v) {\n        _vm.secondDateLicense = $$v;\n      },\n      expression: \"secondDateLicense\"\n    }\n  })], 1), _c('div', {\n    staticClass: \"q-pa-md\"\n  }, [_c('q-btn', {\n    on: {\n      \"click\": function ($event) {\n        _vm.getSumLicensed();\n      }\n    }\n  }, [_vm._v(\"Wyszukaj\")])], 1), _c('div', {\n    staticClass: \"row\"\n  }, [_c('q-radio', {\n    attrs: {\n      \"val\": true\n    },\n    on: {\n      \"input\": function ($event) {\n        _vm.paid = null;\n        _vm.newLicense = null;\n        _vm.getSumLicensed();\n      }\n    },\n    model: {\n      value: _vm.allLicense,\n      callback: function ($$v) {\n        _vm.allLicense = $$v;\n      },\n      expression: \"allLicense\"\n    }\n  }, [_vm._v(\"Wszystkie\")]), _c('q-radio', {\n    attrs: {\n      \"val\": true\n    },\n    on: {\n      \"input\": function ($event) {\n        _vm.allLicense = false;\n        _vm.newLicense = null;\n        _vm.rearrangeSumLicensedTable();\n      }\n    },\n    model: {\n      value: _vm.paid,\n      callback: function ($$v) {\n        _vm.paid = $$v;\n      },\n      expression: \"paid\"\n    }\n  }, [_vm._v(\"Opłacone\")]), _c('q-radio', {\n    attrs: {\n      \"val\": false\n    },\n    on: {\n      \"input\": function ($event) {\n        _vm.allLicense = false;\n        _vm.newLicense = null;\n        _vm.rearrangeSumLicensedTable();\n      }\n    },\n    model: {\n      value: _vm.paid,\n      callback: function ($$v) {\n        _vm.paid = $$v;\n      },\n      expression: \"paid\"\n    }\n  }, [_vm._v(\"Nieopłacone\")]), _c('q-radio', {\n    attrs: {\n      \"val\": true\n    },\n    on: {\n      \"input\": function ($event) {\n        _vm.allLicense = false;\n        _vm.paid = null;\n        _vm.rearrangeSumLicensedTable();\n      }\n    },\n    model: {\n      value: _vm.newLicense,\n      callback: function ($$v) {\n        _vm.newLicense = $$v;\n      },\n      expression: \"newLicense\"\n    }\n  }, [_vm._v(\"Nowe\")])], 1), _vm.licenseArray.length > 0 ? _c('div', {\n    staticClass: \"row\"\n  }, [_c('q-btn', {\n    attrs: {\n      \"color\": \"primary\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.toggleLicenseAlert = true;\n      }\n    }\n  }, [_vm._v(\"Zatwierdź opłacenie zaznaczonych\")])], 1) : _vm._e()], 1), _c('q-card-section', {\n    staticClass: \"col\"\n  }, [_vm.quantitySumLicenseRearrangeTable.length < 1 ? _c('div', {\n    staticClass: \"q-pa-md self-center col full-width no-outline text-bold text-center text-h6\"\n  }, [_vm._v(\"^ Brak wyników opłaconych licencji - Wybierz daty ^\")]) : _vm._e(), _vm.quantitySumLicenseRearrangeTable.length > 0 ? _c('div', {\n    staticClass: \"q-pa-md self-center col full-width no-outline text-bold text-center text-h6\"\n  }, [_vm._v(\"Ilość Licencji : \" + _vm._s(_vm.quantitySumLicenseRearrangeTable.length))]) : _vm._e(), _vm.quantitySumLicenseRearrangeTable.length > 0 ? _c('q-virtual-scroll', {\n    staticClass: \"row full-width\",\n    staticStyle: {\n      \"height\": \"50vh\"\n    },\n    attrs: {\n      \"items\": _vm.quantitySumLicenseRearrangeTable,\n      \"type\": \"table\",\n      \"dense\": \"\"\n    },\n    scopedSlots: _vm._u([{\n      key: \"before\",\n      fn: function () {\n        return [_c('thead', {\n          staticClass: \"thead-sticky text-left\"\n        }, [_c('tr', [_c('th', {\n          staticClass: \"text-left\"\n        }, [_c('div', [_vm._v(_vm._s(_vm.quantitySumLicenseRearrangeTable.length) + \"Nazwisko i Imię\")])]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"10%\"\n          }\n        }, [_c('div', [_vm._v(\"Numer\")]), _c('div', [_vm._v(\"Legitymacji\")])]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"10%\"\n          }\n        }, [_vm._v(\"Grupa\")]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"10%\"\n          }\n        }, [_vm._v(\"Status\")]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"15%\"\n          }\n        }, [_vm._v(\"Data\")]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"15%\"\n          }\n        }, [_c('div', [_vm._v(\"Nowa /\")]), _c('div', [_vm._v(\"Przedłużenie\")])]), _c('th', {\n          staticClass: \"text-left\",\n          staticStyle: {\n            \"width\": \"15%\"\n          }\n        }, [_c('div', [_vm._v(\"Opłacone w\")]), _c('div', [_vm._v(\"PZSS\")])])])])];\n      },\n      proxy: true\n    }, {\n      key: \"default\",\n      fn: function ({\n        item,\n        index\n      }) {\n        return [_c('tr', {\n          key: index,\n          staticClass: \"rounded\",\n          staticStyle: {\n            \"cursor\": \"pointer\"\n          },\n          on: {\n            \"dblclick\": function ($event) {\n              _vm.legitimationNumber = item.legitimationNumber;\n              _vm.memberDial = true;\n            }\n          }\n        }, [_c('q-tooltip', {\n          attrs: {\n            \"content-class\": \"text-subtitle2\",\n            \"anchor\": \"top middle\"\n          }\n        }, [_vm._v(\"kliknij dwa razy aby wyświetlić podgląd\\n              \")]), !item.payInPZSSPortal ? _c('td', {\n          staticClass: \"text-left xyz\"\n        }, [_c('q-checkbox', {\n          attrs: {\n            \"dense\": \"\",\n            \"val\": item.licenseUUID,\n            \"label\": index + 1 + ' ' + item.secondName + ' ' + item.firstName\n          },\n          model: {\n            value: _vm.licenseArray,\n            callback: function ($$v) {\n              _vm.licenseArray = $$v;\n            },\n            expression: \"licenseArray\"\n          }\n        })], 1) : _c('td', {\n          staticClass: \"text-left xyz\"\n        }, [_c('b', [_vm._v(_vm._s(index + 1))]), _vm._v(\" \" + _vm._s(item.secondName) + \" \" + _vm._s(item.firstName) + \" \")]), _c('td', {\n          staticClass: \"text-left\"\n        }, [_vm._v(\"nr leg. \" + _vm._s(item.legitimationNumber))]), item.adult ? _c('td', {\n          staticClass: \"text-left\"\n        }, [_c('div', [_vm._v(\"Ogólna\")])]) : _vm._e(), !item.adult ? _c('td', {\n          staticClass: \"text-left\"\n        }, [_c('div', [_vm._v(\"Młodzieżowa\")])]) : _vm._e(), item.active ? _c('td', {\n          staticClass: \"bg-green-3 text-left\"\n        }, [_c('div', [_vm._v(\"Aktywny\")])]) : _vm._e(), !item.active ? _c('td', {\n          staticClass: \"bg-warning text-left\"\n        }, [_c('div', [_vm._v(\"Nieaktywny\")])]) : _vm._e(), _c('td', {\n          staticClass: \"text-left\"\n        }, [_vm._v(_vm._s(item.date))]), item.new ? _c('td', {\n          staticClass: \"bg-warning\"\n        }, [_vm._v(\"Nowa\")]) : _vm._e(), !item.new ? _c('td', [_vm._v(\"Przedłużenie\")]) : _vm._e(), item.payInPZSSPortal ? _c('td', {\n          staticClass: \"bg-green-3\"\n        }, [_vm._v(\"Opłacone\")]) : _vm._e(), !item.payInPZSSPortal ? _c('td', {\n          staticClass: \"bg-red-3\"\n        }, [_vm._v(\"Nieopłacone\")]) : _vm._e()], 1)];\n      }\n    }], null, false, 1995476682)\n  }) : _vm._e()], 1)], 1)]), _c('q-dialog', {\n    staticStyle: {\n      \"min-width\": \"80vw\"\n    },\n    model: {\n      value: _vm.memberDial,\n      callback: function ($$v) {\n        _vm.memberDial = $$v;\n      },\n      expression: \"memberDial\"\n    }\n  }, [_c('q-card', {\n    staticStyle: {\n      \"min-width\": \"80vw\"\n    }\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center\"\n  }, [_c('Member', {\n    attrs: {\n      \"member-number-legitimation\": _vm.legitimationNumber\n    }\n  })], 1), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"label\": \"zamknij\",\n      \"color\": \"black\"\n    }\n  })], 1)], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"persistent\": \"\"\n    },\n    model: {\n      value: _vm.toggleLicenseAlert,\n      callback: function ($$v) {\n        _vm.toggleLicenseAlert = $$v;\n      },\n      expression: \"toggleLicenseAlert\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-red-5 text-center\"\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center\"\n  }, [_c('h3', [_c('span', {\n    staticClass: \"q-ml-sm\"\n  }, [_vm._v(\"Wprowadź kod potwierdzający\")])]), _c('div', [_c('q-input', {\n    staticClass: \"bg-yellow text-bold\",\n    attrs: {\n      \"autofocus\": \"\",\n      \"type\": \"password\",\n      \"filled\": \"\",\n      \"color\": \"Yellow\",\n      \"mask\": \"####\"\n    },\n    on: {\n      \"keypress\": function ($event) {\n        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) return null;\n        _vm.toggleHistoryPayment();\n        _vm.toggleLicenseAlert = false;\n      }\n    },\n    model: {\n      value: _vm.code,\n      callback: function ($$v) {\n        _vm.code = $$v;\n      },\n      expression: \"code\"\n    }\n  })], 1)]), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"label\": \"anuluj\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.code = null;\n      }\n    }\n  }), _c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"id\": \"3\",\n      \"label\": \"Zatwierdź zmiany\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        return _vm.toggleHistoryPayment();\n      }\n    }\n  })], 1)], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": 'top'\n    },\n    model: {\n      value: _vm.failure,\n      callback: function ($$v) {\n        _vm.failure = $$v;\n      },\n      expression: \"failure\"\n    }\n  }, [_c('q-card', [_c('q-card-section', [_vm.message != null ? _c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))]) : _vm._e()])], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": 'top'\n    },\n    model: {\n      value: _vm.success,\n      callback: function ($$v) {\n        _vm.success = $$v;\n      },\n      expression: \"success\"\n    }\n  }, [_c('q-card', [_c('q-card-section', [_vm.message != null ? _c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))]) : _vm._e()])], 1)], 1)], 1);\n};\nvar staticRenderFns = [];\n\n// CONCATENATED MODULE: ./src/components/statistics/LicensePayments.vue?vue&type=template&id=3e67ba0c&scoped=true&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.string.replace.js\nvar es_string_replace = __webpack_require__(\"5319\");\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js\nvar es_array_push = __webpack_require__(\"14d9\");\n\n// EXTERNAL MODULE: ./src/App.vue + 4 modules\nvar App = __webpack_require__(\"3dfd\");\n\n// EXTERNAL MODULE: ./src/utils/lazyLoadComponent.js\nvar lazyLoadComponent = __webpack_require__(\"a8bc\");\n\n// EXTERNAL MODULE: ./src/utils/SkeletonBox.vue + 4 modules\nvar SkeletonBox = __webpack_require__(\"d6c6\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/statistics/LicensePayments.vue?vue&type=script&lang=js&\n\n\n\n\n\n/* harmony default export */ var LicensePaymentsvue_type_script_lang_js_ = ({\n  name: 'LicensePayments',\n  components: {\n    Member: Object(lazyLoadComponent[\"a\" /* default */])({\n      componentFactory: () => Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(1)]).then(__webpack_require__.bind(null, \"d95e\")),\n      loading: SkeletonBox[\"a\" /* default */]\n    })\n  },\n  data() {\n    return {\n      memberDial: false,\n      toggleLicenseAlert: false,\n      legitimationNumber: null,\n      firstDateLicense: null,\n      paid: null,\n      newLicense: null,\n      allLicense: true,\n      secondDateLicense: this.createTodayDate(),\n      quantitySumLicense: [],\n      quantitySumLicenseRearrangeTable: [],\n      licenseArray: [],\n      failure: false,\n      success: false,\n      message: null,\n      code: null,\n      local: App[\"a\" /* default */].host\n    };\n  },\n  methods: {\n    createTodayDate() {\n      const date = new Date();\n      let month = 0;\n      let day = 0;\n      if (date.getMonth() + 1 < 10) {\n        month = '0' + (date.getMonth() + 1);\n      } else {\n        month = date.getMonth() + 1;\n      }\n      if (date.getDate() < 10) {\n        day = '0' + date.getDate();\n      } else {\n        day = date.getDate();\n      }\n      return date.getFullYear() + '/' + month + '/' + day;\n    },\n    getSumLicensed() {\n      fetch('http://' + this.local + '/statistics/licenseSum?firstDate=' + this.firstDateLicense.replace(/\\//gi, '-') + '&secondDate=' + this.secondDateLicense.replace(/\\//gi, '-'), {\n        method: 'GET'\n      }).then(response => {\n        response.json().then(response => {\n          this.quantitySumLicense = response;\n          this.quantitySumLicenseRearrangeTable = response;\n          this.allLicense = true;\n        });\n      });\n    },\n    rearrangeSumLicensedTable() {\n      const arr = this.quantitySumLicense;\n      const arr1 = [];\n      if (this.paid !== null) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].payInPZSSPortal === this.paid) {\n            arr1.push(arr[i]);\n          }\n        }\n      }\n      if (this.newLicense === true) {\n        for (let i = 0; i < arr.length; i++) {\n          if (arr[i].new === true) {\n            arr1.push(arr[i]);\n          }\n        }\n      }\n      this.quantitySumLicenseRearrangeTable = arr1;\n    },\n    toggleHistoryPayment() {\n      fetch('http://' + this.local + '/license/paymentToggleArray?paymentUUIDs=' + this.licenseArray + '&pinCode=' + this.code, {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(response => {\n        if (response.status === 200) {\n          response.text().then(response => {\n            this.message = response;\n            this.success = true;\n            this.allLicense = true;\n            this.paid = null;\n            this.quantitySumLicense = [];\n            this.licenseArray = [];\n            this.getSumLicensed();\n            this.autoClose();\n          });\n        } else {\n          response.text().then(response => {\n            this.message = response;\n            this.failure = true;\n            this.autoClose();\n          });\n        }\n      });\n    },\n    autoClose() {\n      setTimeout(() => {\n        this.failure = false;\n        this.success = false;\n        this.message = null;\n        this.code = null;\n      }, 2000);\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/statistics/LicensePayments.vue?vue&type=script&lang=js&\n /* harmony default export */ var statistics_LicensePaymentsvue_type_script_lang_js_ = (LicensePaymentsvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItem.js\nvar QItem = __webpack_require__(\"66e5\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 1 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/icon/QIcon.js\nvar QIcon = __webpack_require__(\"0016\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/popup-proxy/QPopupProxy.js\nvar QPopupProxy = __webpack_require__(\"7cbe\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/date/QDate.js\nvar QDate = __webpack_require__(\"52ee\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/radio/QRadio.js\nvar QRadio = __webpack_require__(\"3786\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/virtual-scroll/QVirtualScroll.js + 2 modules\nvar QVirtualScroll = __webpack_require__(\"a12b\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/tooltip/QTooltip.js\nvar QTooltip = __webpack_require__(\"05c0\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/checkbox/QCheckbox.js\nvar QCheckbox = __webpack_require__(\"8f8e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js\nvar QDialog = __webpack_require__(\"24e8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js\nvar QCardActions = __webpack_require__(\"4b7e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/ClosePopup.js\nvar ClosePopup = __webpack_require__(\"7f67\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/components/statistics/LicensePayments.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  statistics_LicensePaymentsvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3e67ba0c\",\n  null\n  \n)\n\n/* harmony default export */ var LicensePayments = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QCardSection: QCardSection[\"a\" /* default */],QItem: QItem[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QIcon: QIcon[\"a\" /* default */],QPopupProxy: QPopupProxy[\"a\" /* default */],QDate: QDate[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QRadio: QRadio[\"a\" /* default */],QVirtualScroll: QVirtualScroll[\"a\" /* default */],QTooltip: QTooltip[\"a\" /* default */],QCheckbox: QCheckbox[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */],QCard: QCard[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */]});runtime_auto_import_default()(component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}