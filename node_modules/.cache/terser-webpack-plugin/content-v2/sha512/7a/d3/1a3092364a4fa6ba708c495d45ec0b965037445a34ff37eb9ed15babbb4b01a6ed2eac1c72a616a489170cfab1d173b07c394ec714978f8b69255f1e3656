{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[24],{\"8f32\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e._self._c;return t(\"div\",{staticStyle:{\"min-width\":\"50%\"}},[t(\"q-card\",{staticClass:\"bg-dark\"},[t(\"q-card-section\",{staticClass:\"flex-center text-positive\"},[t(\"div\",{staticClass:\"text-h6\"},[e._v(\"Stwórz nowy pakiet strzelecki\")]),t(\"div\",[t(\"q-item\",[t(\"q-input\",{staticClass:\"col\",attrs:{label:\"Nazwa Pakietu\",\"label-color\":\"positive\",\"input-class\":\"text-positive\",dense:\"\",filled:\"\"},model:{value:e.packetName,callback:function(t){e.packetName=t},expression:\"packetName\"}}),t(\"q-input\",{staticClass:\"col\",attrs:{label:\"Cena\",type:\"number\",onkeypress:\"return (event.charCode > 44 && event.charCode < 58)\",\"label-color\":\"positive\",\"input-class\":\"text-positive\",dense:\"\",filled:\"\",suffix:\"zł\"},model:{value:e.price,callback:function(t){e.price=t},expression:\"price\"}})],1),e._l(e.calibers,(function(a,s){return t(\"q-item\",{key:s,attrs:{dense:\"\",val:a.uuid}},[t(\"div\",[t(\"q-checkbox\",{model:{value:a.active,callback:function(t){e.$set(a,\"active\",t)},expression:\"item.active\"}})],1),t(\"div\",{staticClass:\"text-positive text-center col\",staticStyle:{display:\"flex\",\"justify-content\":\"center\",\"align-content\":\"center\",\"flex-direction\":\"column\"}},[e._v(e._s(a.name))]),t(\"q-input\",{staticClass:\"col\",attrs:{disable:!a.active,color:\"positive\",\"label-color\":\"positive\",\"input-class\":\"text-positive\",dense:\"\",filled:\"\",label:\"ilość amunicji w pakiecie\",onkeypress:\"return (event.charCode > 44 && event.charCode < 58)\",type:\"number\",max:a.quantity},model:{value:a.counter,callback:function(t){e.$set(a,\"counter\",t)},expression:\"item.counter\"}})],1)}))],2)]),t(\"q-card-actions\",{attrs:{align:\"right\"}},[t(\"q-btn\",{attrs:{\"text-color\":\"white\",label:\"zapisz\",color:\"primary\"},on:{click:function(t){e.code=null,e.addNewPacketCode=!0}}}),t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{\"text-color\":\"white\",label:\"zamknij\",color:\"secondary\"},on:{click:function(t){e.code=null}}})],1)],1),t(\"q-dialog\",{attrs:{persistent:\"\"},model:{value:e.addNewPacketCode,callback:function(t){e.addNewPacketCode=t},expression:\" addNewPacketCode \"}},[t(\"q-card\",{staticClass:\"bg-red-5 text-center\"},[t(\"q-card-section\",{staticClass:\"flex-center\"},[t(\"h3\",[t(\"span\",{staticClass:\"q-ml-sm\"},[e._v(\"Wprowadź kod potwierdzający\")])]),t(\"div\",[t(\"q-input\",{staticClass:\"bg-yellow text-bold\",attrs:{autofocus:\"\",type:\"password\",filled:\"\",color:\"Yellow\",mask:\"####\"},on:{keypress:function(t){if(!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\"))return null;e.addNewPacket(e.packetName,e.mapCalibers(e.calibers),e.price,e.code),e.code=null,e.addNewPacketCode=!1}},model:{value:e.code,callback:function(t){e.code=t},expression:\" code \"}})],1)]),t(\"q-card-actions\",{attrs:{align:\"right\"}},[t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{label:\"anuluj\",color:\"black\"},on:{click:function(t){e.code=null}}}),t(\"q-btn\",{directives:[{name:\"close-popup\",rawName:\"v-close-popup\"}],attrs:{disable:e.dis,id:\"3\",label:\"Wprowadź zmiany\",color:\"black\"},on:{click:function(t){e.dis=!0,e.addNewPacket(e.packetName,e.mapCalibers(e.calibers),e.price,e.code),e.code=null}}})],1)],1)],1),t(\"q-dialog\",{attrs:{position:\"top\"},model:{value:e.success,callback:function(t){e.success=t},expression:\"success\"}},[t(\"q-card\",[t(\"q-card-section\",[t(\"div\",{staticClass:\"text-h6\"},[e._v(e._s(e.message))])])],1)],1),t(\"q-dialog\",{attrs:{position:\"top\"},model:{value:e.failure,callback:function(t){e.failure=t},expression:\"failure\"}},[t(\"q-card\",{staticClass:\"bg-warning\"},[t(\"q-card-section\",[t(\"div\",{staticClass:\"text-h6\"},[e._v(e._s(e.message))])])],1)],1)],1)},i=[],c=(a(\"14d9\"),a(\"3dfd\")),l={created(){this.getListCalibers()},data(){return{code:null,calibers:[],active:!1,dis:!1,addNewPacketCode:!1,packetName:\"\",price:\"\",message:null,success:!1,failure:!1,local:c[\"a\"].host}},methods:{getListCalibers(){fetch(`http://${this.local}/armory/calibers`,{method:\"GET\"}).then((e=>{e.json().then((e=>{let t=[];if(this.calibers=[],e.length>0){t=e.slice(0,e.length);for(let e=0;e<t.length;e++)this.calibers.push({uuid:t[e].uuid,counter:\"0\",active:!1,name:t[e].name})}}))}))},mapCalibers(e){const t=new Map;for(let a=0;a<e.length;a++)e[a].active&&t.set(e[a].uuid,Number(e[a].counter));return t},addNewPacket(e,t,a,s){fetch(`http://${this.local}/armory/addShootingPacket?name=${e}&price=${a}&pinCode=${s}`,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(Object.fromEntries(t))}).then((e=>{200===e.status?e.text().then((e=>{this.message=e,this.success=!0,this.dis=!1,this.getListCalibers(),this.autoClose()})):e.text().then((e=>{this.message=e,this.failure=!0,this.dis=!1,this.autoClose()}))})).catch((()=>{this.message=\"coś jest nie tak\",this.failure=!0,this.dis=!1,this.autoClose()}))},autoClose(){setTimeout((()=>{this.success=!1,this.failure=!1,this.message=null,this.code=null}),2e3)}}},o=l,n=a(\"2877\"),r=a(\"f09f\"),d=a(\"a370\"),u=a(\"66e5\"),p=a(\"27f9\"),h=a(\"8f8e\"),m=a(\"4b7e\"),b=a(\"9c40\"),f=a(\"24e8\"),k=a(\"7f67\"),v=a(\"eebe\"),C=a.n(v),w=Object(n[\"a\"])(o,s,i,!1,null,null,null);t[\"default\"]=w.exports;C()(w,\"components\",{QCard:r[\"a\"],QCardSection:d[\"a\"],QItem:u[\"a\"],QInput:p[\"a\"],QCheckbox:h[\"a\"],QCardActions:m[\"a\"],QBtn:b[\"a\"],QDialog:f[\"a\"]}),C()(w,\"directives\",{ClosePopup:k[\"a\"]})}}]);","name":"js/24.582c55bd.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[24],{\n\n/***/ \"8f32\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/vue-loader/lib/loaders/templateLoader.js??ref--7!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/ammoList/AddNewShootingPacket.vue?vue&type=template&id=98380354&\nvar render = function render() {\n  var _vm = this,\n    _c = _vm._self._c;\n  return _c('div', {\n    staticStyle: {\n      \"min-width\": \"50%\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-dark\"\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center text-positive\"\n  }, [_c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(\"Stwórz nowy pakiet strzelecki\")]), _c('div', [_c('q-item', [_c('q-input', {\n    staticClass: \"col\",\n    attrs: {\n      \"label\": \"Nazwa Pakietu\",\n      \"label-color\": \"positive\",\n      \"input-class\": \"text-positive\",\n      \"dense\": \"\",\n      \"filled\": \"\"\n    },\n    model: {\n      value: _vm.packetName,\n      callback: function ($$v) {\n        _vm.packetName = $$v;\n      },\n      expression: \"packetName\"\n    }\n  }), _c('q-input', {\n    staticClass: \"col\",\n    attrs: {\n      \"label\": \"Cena\",\n      \"type\": \"number\",\n      \"onkeypress\": \"return (event.charCode > 44 && event.charCode < 58)\",\n      \"label-color\": \"positive\",\n      \"input-class\": \"text-positive\",\n      \"dense\": \"\",\n      \"filled\": \"\",\n      \"suffix\": \"zł\"\n    },\n    model: {\n      value: _vm.price,\n      callback: function ($$v) {\n        _vm.price = $$v;\n      },\n      expression: \"price\"\n    }\n  })], 1), _vm._l(_vm.calibers, function (item, uuid) {\n    return _c('q-item', {\n      key: uuid,\n      attrs: {\n        \"dense\": \"\",\n        \"val\": item.uuid\n      }\n    }, [_c('div', [_c('q-checkbox', {\n      model: {\n        value: item.active,\n        callback: function ($$v) {\n          _vm.$set(item, \"active\", $$v);\n        },\n        expression: \"item.active\"\n      }\n    })], 1), _c('div', {\n      staticClass: \"text-positive text-center col\",\n      staticStyle: {\n        \"display\": \"flex\",\n        \"justify-content\": \"center\",\n        \"align-content\": \"center\",\n        \"flex-direction\": \"column\"\n      }\n    }, [_vm._v(_vm._s(item.name))]), _c('q-input', {\n      staticClass: \"col\",\n      attrs: {\n        \"disable\": !item.active,\n        \"color\": \"positive\",\n        \"label-color\": \"positive\",\n        \"input-class\": \"text-positive\",\n        \"dense\": \"\",\n        \"filled\": \"\",\n        \"label\": \"ilość amunicji w pakiecie\",\n        \"onkeypress\": \"return (event.charCode > 44 && event.charCode < 58)\",\n        \"type\": \"number\",\n        \"max\": item.quantity\n      },\n      model: {\n        value: item.counter,\n        callback: function ($$v) {\n          _vm.$set(item, \"counter\", $$v);\n        },\n        expression: \"item.counter\"\n      }\n    })], 1);\n  })], 2)]), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    attrs: {\n      \"text-color\": \"white\",\n      \"label\": \"zapisz\",\n      \"color\": \"primary\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.code = null;\n        _vm.addNewPacketCode = true;\n      }\n    }\n  }), _c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"text-color\": \"white\",\n      \"label\": \"zamknij\",\n      \"color\": \"secondary\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.code = null;\n      }\n    }\n  })], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"persistent\": \"\"\n    },\n    model: {\n      value: _vm.addNewPacketCode,\n      callback: function ($$v) {\n        _vm.addNewPacketCode = $$v;\n      },\n      expression: \" addNewPacketCode \"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-red-5 text-center\"\n  }, [_c('q-card-section', {\n    staticClass: \"flex-center\"\n  }, [_c('h3', [_c('span', {\n    staticClass: \"q-ml-sm\"\n  }, [_vm._v(\"Wprowadź kod potwierdzający\")])]), _c('div', [_c('q-input', {\n    staticClass: \"bg-yellow text-bold\",\n    attrs: {\n      \"autofocus\": \"\",\n      \"type\": \"password\",\n      \"filled\": \"\",\n      \"color\": \"Yellow\",\n      \"mask\": \"####\"\n    },\n    on: {\n      \"keypress\": function ($event) {\n        if (!$event.type.indexOf('key') && _vm._k($event.keyCode, \"enter\", 13, $event.key, \"Enter\")) return null;\n        _vm.addNewPacket(_vm.packetName, _vm.mapCalibers(_vm.calibers), _vm.price, _vm.code);\n        _vm.code = null;\n        _vm.addNewPacketCode = false;\n      }\n    },\n    model: {\n      value: _vm.code,\n      callback: function ($$v) {\n        _vm.code = $$v;\n      },\n      expression: \" code \"\n    }\n  })], 1)]), _c('q-card-actions', {\n    attrs: {\n      \"align\": \"right\"\n    }\n  }, [_c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"label\": \"anuluj\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.code = null;\n      }\n    }\n  }), _c('q-btn', {\n    directives: [{\n      name: \"close-popup\",\n      rawName: \"v-close-popup\"\n    }],\n    attrs: {\n      \"disable\": _vm.dis,\n      \"id\": \"3\",\n      \"label\": \"Wprowadź zmiany\",\n      \"color\": \"black\"\n    },\n    on: {\n      \"click\": function ($event) {\n        _vm.dis = true;\n        _vm.addNewPacket(_vm.packetName, _vm.mapCalibers(_vm.calibers), _vm.price, _vm.code);\n        _vm.code = null;\n      }\n    }\n  })], 1)], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": \"top\"\n    },\n    model: {\n      value: _vm.success,\n      callback: function ($$v) {\n        _vm.success = $$v;\n      },\n      expression: \"success\"\n    }\n  }, [_c('q-card', [_c('q-card-section', [_c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))])])], 1)], 1), _c('q-dialog', {\n    attrs: {\n      \"position\": \"top\"\n    },\n    model: {\n      value: _vm.failure,\n      callback: function ($$v) {\n        _vm.failure = $$v;\n      },\n      expression: \"failure\"\n    }\n  }, [_c('q-card', {\n    staticClass: \"bg-warning\"\n  }, [_c('q-card-section', [_c('div', {\n    staticClass: \"text-h6\"\n  }, [_vm._v(_vm._s(_vm.message))])])], 1)], 1)], 1);\n};\nvar staticRenderFns = [];\n\n// CONCATENATED MODULE: ./src/components/ammoList/AddNewShootingPacket.vue?vue&type=template&id=98380354&\n\n// EXTERNAL MODULE: ./node_modules/core-js/modules/es.array.push.js\nvar es_array_push = __webpack_require__(\"14d9\");\n\n// EXTERNAL MODULE: ./src/App.vue + 4 modules\nvar App = __webpack_require__(\"3dfd\");\n\n// CONCATENATED MODULE: ./node_modules/@quasar/app/lib/webpack/loader.transform-quasar-imports.js!./node_modules/babel-loader/lib??ref--2-0!./node_modules/@quasar/app/lib/webpack/loader.auto-import-client.js?kebab!./node_modules/vue-loader/lib??vue-loader-options!./src/components/ammoList/AddNewShootingPacket.vue?vue&type=script&lang=js&\n\n\n/* harmony default export */ var AddNewShootingPacketvue_type_script_lang_js_ = ({\n  created() {\n    this.getListCalibers();\n  },\n  data() {\n    return {\n      code: null,\n      calibers: [],\n      active: false,\n      dis: false,\n      addNewPacketCode: false,\n      packetName: '',\n      price: '',\n      message: null,\n      success: false,\n      failure: false,\n      local: App[\"a\" /* default */].host\n    };\n  },\n  methods: {\n    getListCalibers() {\n      fetch(`http://${this.local}/armory/calibers`, {\n        method: 'GET'\n      }).then(response => {\n        response.json().then(response => {\n          let temp = [];\n          this.calibers = [];\n          if (response.length > 0) {\n            temp = response.slice(0, response.length);\n            for (let i = 0; i < temp.length; i++) {\n              this.calibers.push({\n                uuid: temp[i].uuid,\n                counter: '0',\n                active: false,\n                name: temp[i].name\n              });\n            }\n          }\n        });\n      });\n    },\n    mapCalibers(calibersObject) {\n      const map = new Map();\n      for (let i = 0; i < calibersObject.length; i++) {\n        if (calibersObject[i].active) {\n          map.set(calibersObject[i].uuid, Number(calibersObject[i].counter));\n        }\n      }\n      return map;\n    },\n    addNewPacket(name, map, price, code) {\n      fetch(`http://${this.local}/armory/addShootingPacket?name=${name}&price=${price}&pinCode=${code}`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(Object.fromEntries(map))\n      }).then(response => {\n        if (response.status === 200) {\n          response.text().then(response => {\n            this.message = response;\n            this.success = true;\n            this.dis = false;\n            this.getListCalibers();\n            this.autoClose();\n          });\n        } else {\n          response.text().then(response => {\n            this.message = response;\n            this.failure = true;\n            this.dis = false;\n            this.autoClose();\n          });\n        }\n      }).catch(() => {\n        this.message = 'coś jest nie tak';\n        this.failure = true;\n        this.dis = false;\n        this.autoClose();\n      });\n    },\n    autoClose() {\n      setTimeout(() => {\n        this.success = false;\n        this.failure = false;\n        this.message = null;\n        this.code = null;\n      }, 2000);\n    }\n  }\n});\n// CONCATENATED MODULE: ./src/components/ammoList/AddNewShootingPacket.vue?vue&type=script&lang=js&\n /* harmony default export */ var ammoList_AddNewShootingPacketvue_type_script_lang_js_ = (AddNewShootingPacketvue_type_script_lang_js_); \n// EXTERNAL MODULE: ./node_modules/vue-loader/lib/runtime/componentNormalizer.js\nvar componentNormalizer = __webpack_require__(\"2877\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCard.js\nvar QCard = __webpack_require__(\"f09f\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardSection.js\nvar QCardSection = __webpack_require__(\"a370\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/item/QItem.js\nvar QItem = __webpack_require__(\"66e5\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/input/QInput.js + 1 modules\nvar QInput = __webpack_require__(\"27f9\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/checkbox/QCheckbox.js\nvar QCheckbox = __webpack_require__(\"8f8e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/card/QCardActions.js\nvar QCardActions = __webpack_require__(\"4b7e\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/btn/QBtn.js\nvar QBtn = __webpack_require__(\"9c40\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/components/dialog/QDialog.js\nvar QDialog = __webpack_require__(\"24e8\");\n\n// EXTERNAL MODULE: ./node_modules/quasar/src/directives/ClosePopup.js\nvar ClosePopup = __webpack_require__(\"7f67\");\n\n// EXTERNAL MODULE: ./node_modules/@quasar/app/lib/webpack/runtime.auto-import.js\nvar runtime_auto_import = __webpack_require__(\"eebe\");\nvar runtime_auto_import_default = /*#__PURE__*/__webpack_require__.n(runtime_auto_import);\n\n// CONCATENATED MODULE: ./src/components/ammoList/AddNewShootingPacket.vue\n\n\n\n\n\n/* normalize component */\n\nvar component = Object(componentNormalizer[\"a\" /* default */])(\n  ammoList_AddNewShootingPacketvue_type_script_lang_js_,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* harmony default export */ var AddNewShootingPacket = __webpack_exports__[\"default\"] = (component.exports);\n\n\n\n\n\n\n\n\n\nruntime_auto_import_default()(component, 'components', {QCard: QCard[\"a\" /* default */],QCardSection: QCardSection[\"a\" /* default */],QItem: QItem[\"a\" /* default */],QInput: QInput[\"a\" /* default */],QCheckbox: QCheckbox[\"a\" /* default */],QCardActions: QCardActions[\"a\" /* default */],QBtn: QBtn[\"a\" /* default */],QDialog: QDialog[\"a\" /* default */]});runtime_auto_import_default()(component, 'directives', {ClosePopup: ClosePopup[\"a\" /* default */]});\n\n\n/***/ })\n\n}]);","inputSourceMap":null}